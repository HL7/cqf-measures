<?xml version="1.0" encoding="UTF-8"?>
<library xmlns="urn:hl7-org:elm:r1" xmlns:t="urn:hl7-org:elm-types:r1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:fhir="http://hl7.org/fhir" xmlns:qdm43="urn:healthit-gov:qdm:v4_3" xmlns:qdm53="urn:healthit-gov:qdm:v5_3" xmlns:a="urn:hl7-org:cql-annotations:r1">
   <identifier id="PotentialOpioidOveruse" version="0.1.082"/>
   <schemaIdentifier id="urn:hl7-org:elm" version="r1"/>
   <usings>
      <def localIdentifier="System" uri="urn:hl7-org:elm-types:r1"/>
      <def localId="1" locator="3:1-3:23" localIdentifier="QDM" uri="urn:healthit-gov:qdm:v5_3" version="5.3"/>
   </usings>
   <includes>
      <def localId="2" locator="5:1-5:64" localIdentifier="Global" path="MATGlobalCommonFunctions" version="2.0.000"/>
      <def localId="3" locator="6:1-6:72" localIdentifier="OpioidConversionLogic" path="OpioidConversion" version="1.21.000"/>
      <def localId="4" locator="7:1-7:55" localIdentifier="Timing" path="DayMonthTimings" version="0.9.000"/>
   </includes>
   <parameters>
      <def localId="66" locator="50:1-50:49" name="Measurement Period" accessLevel="Public">
         <parameterTypeSpecifier localId="65" locator="50:32-50:49" xsi:type="IntervalTypeSpecifier">
            <pointType localId="64" locator="50:41-50:48" name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
         </parameterTypeSpecifier>
      </def>
   </parameters>
   <codeSystems>
      <def localId="5" locator="9:1-9:97" name="SNOMEDCT:2018-03" id="urn:oid:2.16.840.1.113883.6.96" version="urn:hl7:version:2018-03" accessLevel="Public"/>
      <def localId="6" locator="10:1-10:55" name="SNOMEDCT" id="urn:oid:2.16.840.1.113883.6.96" accessLevel="Public"/>
   </codeSystems>
   <valueSets>
      <def localId="7" locator="12:1-12:68" name="ONC Administrative Sex" id="urn:oid:2.16.840.1.113762.1.4.1" accessLevel="Public"/>
      <def localId="8" locator="13:1-13:53" name="Race" id="urn:oid:2.16.840.1.114222.4.11.836" accessLevel="Public"/>
      <def localId="9" locator="14:1-14:58" name="Ethnicity" id="urn:oid:2.16.840.1.114222.4.11.837" accessLevel="Public"/>
      <def localId="10" locator="15:1-15:55" name="Payer" id="urn:oid:2.16.840.1.114222.4.11.3591" accessLevel="Public"/>
      <def localId="11" locator="16:1-16:75" name="Office Visit" id="urn:oid:2.16.840.1.113883.3.464.1003.101.12.1001" accessLevel="Public"/>
      <def localId="12" locator="17:1-17:125" name="Preventive Care Services - Established Office Visit, 18 and Up" id="urn:oid:2.16.840.1.113883.3.464.1003.101.12.1025" accessLevel="Public"/>
      <def localId="13" locator="18:1-18:119" name="Preventive Care Services-Initial Office Visit, 18 and Up" id="urn:oid:2.16.840.1.113883.3.464.1003.101.12.1023" accessLevel="Public"/>
      <def localId="14" locator="19:1-19:95" name="Preventive Care Services - Other" id="urn:oid:2.16.840.1.113883.3.464.1003.101.12.1030" accessLevel="Public"/>
      <def localId="15" locator="20:1-20:83" name="Face to Face Interaction - No ED" id="urn:oid:2.16.840.1.113762.1.4.1080.2" accessLevel="Public"/>
      <def localId="16" locator="21:1-21:68" name="Palliative Care" id="urn:oid:2.16.840.1.113883.3.600.1.1579" accessLevel="Public"/>
      <def localId="17" locator="22:1-22:71" name="Hospice Care SNO" id="urn:oid:2.16.840.1.113883.3.3157.1004.20" accessLevel="Public"/>
      <def localId="18" locator="23:1-23:73" name="All Cancer" id="urn:oid:2.16.840.1.113883.3.464.1003.108.12.1011" accessLevel="Public"/>
      <def localId="19" locator="24:1-24:80" name="Sickle Cell Disease SNOMEDCT" id="urn:oid:2.16.840.1.113762.1.4.1029.33" accessLevel="Public"/>
      <def localId="20" locator="25:1-25:86" name="Outpatient Consultation" id="urn:oid:2.16.840.1.113883.3.464.1003.101.12.1008" accessLevel="Public"/>
      <def localId="21" locator="26:1-26:73" name="Opioid Medications" id="urn:oid:2.16.840.1.113883.3.3157.1004.26" accessLevel="Public"/>
   </valueSets>
   <codes>
      <def localId="23" locator="28:1-28:125" name="Every eight hours (qualifier value)" id="307469008" display="Every eight hours (qualifier value)" accessLevel="Public">
         <codeSystem localId="22" locator="28:62-28:79" name="SNOMEDCT:2018-03"/>
      </def>
      <def localId="25" locator="29:1-29:137" name="Every eight to twelve hours (qualifier value)" id="396140003" display="Every eight to twelve hours (qualifier value)" accessLevel="Public">
         <codeSystem localId="24" locator="29:72-29:81" name="SNOMEDCT"/>
      </def>
      <def localId="27" locator="30:1-30:137" name="Every forty eight hours (qualifier value)" id="396131002" display="Every forty eight hours (qualifier value)" accessLevel="Public">
         <codeSystem localId="26" locator="30:68-30:85" name="SNOMEDCT:2018-03"/>
      </def>
      <def localId="29" locator="31:1-31:115" name="Every four hours (qualifier value)" id="225756002" display="Every four hours (qualifier value)" accessLevel="Public">
         <codeSystem localId="28" locator="31:61-31:70" name="SNOMEDCT"/>
      </def>
      <def localId="31" locator="32:1-32:137" name="Every seventy two hours (qualifier value)" id="396143001" display="Every seventy two hours (qualifier value)" accessLevel="Public">
         <codeSystem localId="30" locator="32:68-32:85" name="SNOMEDCT:2018-03"/>
      </def>
      <def localId="33" locator="33:1-33:121" name="Every six hours (qualifier value)" id="307468000" display="Every six hours (qualifier value)" accessLevel="Public">
         <codeSystem localId="32" locator="33:60-33:77" name="SNOMEDCT:2018-03"/>
      </def>
      <def localId="35" locator="34:1-34:131" name="Every six to eight hours (qualifier value)" id="396139000" display="Every six to eight hours (qualifier value)" accessLevel="Public">
         <codeSystem localId="34" locator="34:69-34:78" name="SNOMEDCT"/>
      </def>
      <def localId="37" locator="35:1-35:135" name="Every thirty six hours (qualifier value)" id="396126004" display="Every thirty six hours (qualifier value)" accessLevel="Public">
         <codeSystem localId="36" locator="35:67-35:84" name="SNOMEDCT:2018-03"/>
      </def>
      <def localId="39" locator="36:1-36:133" name="Every three to four hours (qualifier value)" id="225754004" display="Every three to four hours (qualifier value)" accessLevel="Public">
         <codeSystem localId="38" locator="36:70-36:79" name="SNOMEDCT"/>
      </def>
      <def localId="41" locator="37:1-37:131" name="Every three to six hours (qualifier value)" id="396127008" display="Every three to six hours (qualifier value)" accessLevel="Public">
         <codeSystem localId="40" locator="37:69-37:78" name="SNOMEDCT"/>
      </def>
      <def localId="43" locator="38:1-38:127" name="Every twelve hours (qualifier value)" id="307470009" display="Every twelve hours (qualifier value)" accessLevel="Public">
         <codeSystem localId="42" locator="38:63-38:80" name="SNOMEDCT:2018-03"/>
      </def>
      <def localId="45" locator="39:1-39:137" name="Every twenty four hours (qualifier value)" id="396125000" display="Every twenty four hours (qualifier value)" accessLevel="Public">
         <codeSystem localId="44" locator="39:68-39:85" name="SNOMEDCT:2018-03"/>
      </def>
      <def localId="47" locator="40:1-40:129" name="Every two to four hours (qualifier value)" id="225752000" display="Every two to four hours (qualifier value)" accessLevel="Public">
         <codeSystem localId="46" locator="40:68-40:77" name="SNOMEDCT"/>
      </def>
      <def localId="49" locator="41:1-41:123" name="Four times daily (qualifier value)" id="307439001" display="Four times daily (qualifier value)" accessLevel="Public">
         <codeSystem localId="48" locator="41:61-41:78" name="SNOMEDCT:2018-03"/>
      </def>
      <def localId="51" locator="42:1-42:111" name="Once daily (qualifier value)" id="229797004" display="Once daily (qualifier value)" accessLevel="Public">
         <codeSystem localId="50" locator="42:55-42:72" name="SNOMEDCT:2018-03"/>
      </def>
      <def localId="53" locator="43:1-43:129" name="One to four times a day (qualifier value)" id="396109005" display="One to four times a day (qualifier value)" accessLevel="Public">
         <codeSystem localId="52" locator="43:68-43:77" name="SNOMEDCT"/>
      </def>
      <def localId="55" locator="44:1-44:131" name="One to three times a day (qualifier value)" id="396108002" display="One to three times a day (qualifier value)" accessLevel="Public">
         <codeSystem localId="54" locator="44:69-44:78" name="SNOMEDCT"/>
      </def>
      <def localId="57" locator="45:1-45:127" name="One to two times a day (qualifier value)" id="396107007" display="One to two times a day (qualifier value)" accessLevel="Public">
         <codeSystem localId="56" locator="45:67-45:76" name="SNOMEDCT"/>
      </def>
      <def localId="59" locator="46:1-46:125" name="Three times daily (qualifier value)" id="229798009" display="Three times daily (qualifier value)" accessLevel="Public">
         <codeSystem localId="58" locator="46:62-46:79" name="SNOMEDCT:2018-03"/>
      </def>
      <def localId="61" locator="47:1-47:113" name="Twice a day (qualifier value)" id="229799001" display="Twice a day (qualifier value)" accessLevel="Public">
         <codeSystem localId="60" locator="47:56-47:73" name="SNOMEDCT:2018-03"/>
      </def>
      <def localId="63" locator="48:1-48:129" name="Two to four times a day (qualifier value)" id="396111001" display="Two to four times a day (qualifier value)" accessLevel="Public">
         <codeSystem localId="62" locator="48:68-48:77" name="SNOMEDCT"/>
      </def>
   </codes>
   <statements>
      <def locator="52:1-52:15" name="Patient" context="Patient">
         <expression xsi:type="SingletonFrom">
            <operand locator="52:1-52:15" dataType="qdm53:Patient" templateId="Patient" xsi:type="Retrieve"/>
         </expression>
      </def>
      <def localId="68" locator="54:1-55:50" name="SDE Ethnicity" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="68">
               <a:s>define &quot;SDE Ethnicity&quot;:&#xd;
	</a:s>
               <a:s r="67">
                  <a:s>[&quot;Patient Characteristic Ethnicity&quot;: </a:s>
                  <a:s>
                     <a:s>&quot;Ethnicity&quot;</a:s>
                  </a:s>
                  <a:s>]</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="67" locator="55:2-55:50" dataType="qdm53:PatientCharacteristicEthnicity" codeProperty="code" xsi:type="Retrieve">
            <codes name="Ethnicity" xsi:type="ValueSetRef"/>
         </expression>
      </def>
      <def localId="70" locator="57:1-58:42" name="SDE Payer" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="70">
               <a:s>define &quot;SDE Payer&quot;:&#xd;
	</a:s>
               <a:s r="69">
                  <a:s>[&quot;Patient Characteristic Payer&quot;: </a:s>
                  <a:s>
                     <a:s>&quot;Payer&quot;</a:s>
                  </a:s>
                  <a:s>]</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="69" locator="58:2-58:42" dataType="qdm53:PatientCharacteristicPayer" codeProperty="code" xsi:type="Retrieve">
            <codes name="Payer" xsi:type="ValueSetRef"/>
         </expression>
      </def>
      <def localId="72" locator="60:1-61:40" name="SDE Race" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="72">
               <a:s>define &quot;SDE Race&quot;:&#xd;
	</a:s>
               <a:s r="71">
                  <a:s>[&quot;Patient Characteristic Race&quot;: </a:s>
                  <a:s>
                     <a:s>&quot;Race&quot;</a:s>
                  </a:s>
                  <a:s>]</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="71" locator="61:2-61:40" dataType="qdm53:PatientCharacteristicRace" codeProperty="code" xsi:type="Retrieve">
            <codes name="Race" xsi:type="ValueSetRef"/>
         </expression>
      </def>
      <def localId="74" locator="63:1-64:57" name="SDE Sex" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="74">
               <a:s>define &quot;SDE Sex&quot;:&#xd;
	</a:s>
               <a:s r="73">
                  <a:s>[&quot;Patient Characteristic Sex&quot;: </a:s>
                  <a:s>
                     <a:s>&quot;ONC Administrative Sex&quot;</a:s>
                  </a:s>
                  <a:s>]</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="73" locator="64:2-64:57" dataType="qdm53:PatientCharacteristicSex" codeProperty="code" xsi:type="Retrieve">
            <codes name="ONC Administrative Sex" xsi:type="ValueSetRef"/>
         </expression>
      </def>
      <def localId="100" locator="136:1-144:60" name="Encounters during Measurement Period" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="100">
               <a:s>define &quot;Encounters during Measurement Period&quot;:&#xd;
	/*Determines if qualifying encounters were performed during the Measurement Period*/&#xd;
	</a:s>
               <a:s r="99">
                  <a:s>
                     <a:s r="94">
                        <a:s r="93">
                           <a:s>( </a:s>
                           <a:s r="93">
                              <a:s r="91">
                                 <a:s r="89">
                                    <a:s r="87">
                                       <a:s r="85">
                                          <a:s r="83">
                                             <a:s>[&quot;Encounter, Performed&quot;: </a:s>
                                             <a:s>
                                                <a:s>&quot;Face to Face Interaction - No ED&quot;</a:s>
                                             </a:s>
                                             <a:s>]</a:s>
                                          </a:s>
                                          <a:s>&#xd;
		union </a:s>
                                          <a:s r="84">
                                             <a:s>[&quot;Encounter, Performed&quot;: </a:s>
                                             <a:s>
                                                <a:s>&quot;Office Visit&quot;</a:s>
                                             </a:s>
                                             <a:s>]</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>&#xd;
		union </a:s>
                                       <a:s r="86">
                                          <a:s>[&quot;Encounter, Performed&quot;: </a:s>
                                          <a:s>
                                             <a:s>&quot;Preventive Care Services - Established Office Visit, 18 and Up&quot;</a:s>
                                          </a:s>
                                          <a:s>]</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>&#xd;
		union </a:s>
                                    <a:s r="88">
                                       <a:s>[&quot;Encounter, Performed&quot;: </a:s>
                                       <a:s>
                                          <a:s>&quot;Preventive Care Services-Initial Office Visit, 18 and Up&quot;</a:s>
                                       </a:s>
                                       <a:s>]</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>&#xd;
		union </a:s>
                                 <a:s r="90">
                                    <a:s>[&quot;Encounter, Performed&quot;: </a:s>
                                    <a:s>
                                       <a:s>&quot;Outpatient Consultation&quot;</a:s>
                                    </a:s>
                                    <a:s>]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>&#xd;
		union </a:s>
                              <a:s r="92">
                                 <a:s>[&quot;Encounter, Performed&quot;: </a:s>
                                 <a:s>
                                    <a:s>&quot;Preventive Care Services - Other&quot;</a:s>
                                 </a:s>
                                 <a:s>]</a:s>
                              </a:s>
                           </a:s>
                           <a:s> )</a:s>
                        </a:s>
                        <a:s> Encounter</a:s>
                     </a:s>
                  </a:s>
                  <a:s>&#xd;
		</a:s>
                  <a:s r="98">
                     <a:s>where </a:s>
                     <a:s r="98">
                        <a:s r="96">
                           <a:s r="95">
                              <a:s>Encounter</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="96">
                              <a:s>relevantPeriod</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="98"> during </a:s>
                        <a:s r="97">
                           <a:s>&quot;Measurement Period&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="99" locator="138:2-144:60" xsi:type="Query">
            <source localId="94" locator="138:2-143:80" alias="Encounter">
               <expression localId="93" locator="138:2-143:70" xsi:type="Union">
                  <operand localId="89" locator="138:4-141:92" xsi:type="Union">
                     <operand localId="85" locator="138:4-139:48" xsi:type="Union">
                        <operand localId="83" locator="138:4-138:63" dataType="qdm53:PositiveEncounterPerformed" templateId="PositiveEncounterPerformed" codeProperty="code" xsi:type="Retrieve">
                           <codes name="Face to Face Interaction - No ED" xsi:type="ValueSetRef"/>
                        </operand>
                        <operand localId="84" locator="139:9-139:48" dataType="qdm53:PositiveEncounterPerformed" templateId="PositiveEncounterPerformed" codeProperty="code" xsi:type="Retrieve">
                           <codes name="Office Visit" xsi:type="ValueSetRef"/>
                        </operand>
                     </operand>
                     <operand xsi:type="Union">
                        <operand localId="86" locator="140:9-140:98" dataType="qdm53:PositiveEncounterPerformed" templateId="PositiveEncounterPerformed" codeProperty="code" xsi:type="Retrieve">
                           <codes name="Preventive Care Services - Established Office Visit, 18 and Up" xsi:type="ValueSetRef"/>
                        </operand>
                        <operand localId="88" locator="141:9-141:92" dataType="qdm53:PositiveEncounterPerformed" templateId="PositiveEncounterPerformed" codeProperty="code" xsi:type="Retrieve">
                           <codes name="Preventive Care Services-Initial Office Visit, 18 and Up" xsi:type="ValueSetRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand xsi:type="Union">
                     <operand localId="90" locator="142:9-142:59" dataType="qdm53:PositiveEncounterPerformed" templateId="PositiveEncounterPerformed" codeProperty="code" xsi:type="Retrieve">
                        <codes name="Outpatient Consultation" xsi:type="ValueSetRef"/>
                     </operand>
                     <operand localId="92" locator="143:9-143:68" dataType="qdm53:PositiveEncounterPerformed" templateId="PositiveEncounterPerformed" codeProperty="code" xsi:type="Retrieve">
                        <codes name="Preventive Care Services - Other" xsi:type="ValueSetRef"/>
                     </operand>
                  </operand>
               </expression>
            </source>
            <where localId="98" locator="144:3-144:60" xsi:type="IncludedIn">
               <operand localId="96" locator="144:9-144:32" path="relevantPeriod" scope="Encounter" xsi:type="Property"/>
               <operand localId="97" locator="144:41-144:60" name="Measurement Period" xsi:type="ParameterRef"/>
            </where>
         </expression>
      </def>
      <def localId="111" locator="82:1-85:74" name="Opioid Medication Order during Measurement Period" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="111">
               <a:s>define &quot;Opioid Medication Order during Measurement Period&quot;:&#xd;
	/*An active opioid medication order during or overlapping the start of the measurement period*/&#xd;
	</a:s>
               <a:s r="110">
                  <a:s>
                     <a:s r="105">
                        <a:s r="104">
                           <a:s r="104">
                              <a:s>[&quot;Medication, Order&quot;: </a:s>
                              <a:s>
                                 <a:s>&quot;Opioid Medications&quot;</a:s>
                              </a:s>
                              <a:s>]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> OpioidMedicationOrder</a:s>
                     </a:s>
                  </a:s>
                  <a:s>&#xd;
		</a:s>
                  <a:s r="109">
                     <a:s>where </a:s>
                     <a:s r="109">
                        <a:s r="107">
                           <a:s r="106">
                              <a:s>OpioidMedicationOrder</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="107">
                              <a:s>relevantPeriod</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="109"> overlaps </a:s>
                        <a:s r="108">
                           <a:s>&quot;Measurement Period&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="110" locator="84:2-85:74" xsi:type="Query">
            <source localId="105" locator="84:2-84:66" alias="OpioidMedicationOrder">
               <expression localId="104" locator="84:2-84:44" dataType="qdm53:PositiveMedicationOrder" templateId="PositiveMedicationOrder" codeProperty="code" xsi:type="Retrieve">
                  <codes name="Opioid Medications" xsi:type="ValueSetRef"/>
               </expression>
            </source>
            <where localId="109" locator="85:3-85:74" xsi:type="Overlaps">
               <operand localId="107" locator="85:9-85:44" path="relevantPeriod" scope="OpioidMedicationOrder" xsi:type="Property"/>
               <operand localId="108" locator="85:55-85:74" name="Measurement Period" xsi:type="ParameterRef"/>
            </where>
         </expression>
      </def>
      <def localId="122" locator="93:1-100:3" name="Opioid Medication Periods in Measurement Period" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="122">
               <a:s>define &quot;Opioid Medication Periods in Measurement Period&quot;:&#xd;
	/*Creates a list that has the medication and the period of the medication in the measurement period*/&#xd;
	</a:s>
               <a:s r="121">
                  <a:s>
                     <a:s r="113">
                        <a:s r="112">
                           <a:s>
                              <a:s>&quot;Opioid Medication Order during Measurement Period&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> Opioid</a:s>
                     </a:s>
                  </a:s>
                  <a:s>&#xd;
		</a:s>
                  <a:s r="120">
                     <a:s>return </a:s>
                     <a:s r="119">
                        <a:s>{&#xd;
			</a:s>
                        <a:s>
                           <a:s>periodInMP: </a:s>
                           <a:s r="117">
                              <a:s r="115">
                                 <a:s r="114">
                                    <a:s>Opioid</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="115">
                                    <a:s>relevantPeriod</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>&#xd;
				intersect </a:s>
                              <a:s r="116">
                                 <a:s>&quot;Measurement Period&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,&#xd;
			</a:s>
                        <a:s>
                           <a:s>med: </a:s>
                           <a:s r="118">
                              <a:s>Opioid</a:s>
                           </a:s>
                        </a:s>
                        <a:s>&#xd;
		}</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="121" locator="95:2-100:3" xsi:type="Query">
            <source localId="113" locator="95:2-95:59" alias="Opioid">
               <expression localId="112" locator="95:2-95:52" name="Opioid Medication Order during Measurement Period" xsi:type="ExpressionRef"/>
            </source>
            <return localId="120" locator="96:3-100:3">
               <expression localId="119" locator="96:10-100:3" xsi:type="Tuple">
                  <element name="periodInMP">
                     <value localId="117" locator="97:16-98:34" xsi:type="Intersect">
                        <operand localId="115" locator="97:16-97:36" path="relevantPeriod" scope="Opioid" xsi:type="Property"/>
                        <operand localId="116" locator="98:15-98:34" name="Measurement Period" xsi:type="ParameterRef"/>
                     </value>
                  </element>
                  <element name="med">
                     <value localId="118" locator="99:9-99:14" name="Opioid" xsi:type="AliasRef"/>
                  </element>
               </expression>
            </return>
         </expression>
      </def>
      <def localId="130" locator="87:1-91:2" name="Opioid Medication Periods" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="130">
               <a:s>define &quot;Opioid Medication Periods&quot;:&#xd;
	/*All intervals of opioid medications, associated with the measurement period, and returns a unique set of intervals that covers all time periods for all opioid prescriptions*/&#xd;
	</a:s>
               <a:s r="129">
                  <a:s>collapse </a:s>
                  <a:s r="128">
                     <a:s>( </a:s>
                     <a:s r="128">
                        <a:s>
                           <a:s r="124">
                              <a:s r="123">
                                 <a:s>
                                    <a:s>&quot;Opioid Medication Periods in Measurement Period&quot;</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> OpioidPeriod</a:s>
                           </a:s>
                        </a:s>
                        <a:s>&#xd;
			</a:s>
                        <a:s r="127">
                           <a:s>return </a:s>
                           <a:s r="126">
                              <a:s r="125">
                                 <a:s>OpioidPeriod</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="126">
                                 <a:s>periodInMP</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>&#xd;
	)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="129" locator="89:2-91:2" xsi:type="Collapse">
            <operand localId="128" locator="89:11-91:2" xsi:type="Query">
               <source localId="124" locator="89:13-89:74" alias="OpioidPeriod">
                  <expression localId="123" locator="89:13-89:61" name="Opioid Medication Periods in Measurement Period" xsi:type="ExpressionRef"/>
               </source>
               <return localId="127" locator="90:4-90:33">
                  <expression localId="126" locator="90:11-90:33" path="periodInMP" scope="OpioidPeriod" xsi:type="Property"/>
               </return>
            </operand>
            <operand resultTypeName="t:Quantity" xsi:type="Null"/>
         </expression>
      </def>
      <def localId="152" locator="128:1-134:65" name="Gaps in Active Opioid Period" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="152">
               <a:s>define &quot;Gaps in Active Opioid Period&quot;:&#xd;
	/*Creates a list of the opioid medications and its start and end dates within the measurement period*/&#xd;
	</a:s>
               <a:s r="151">
                  <a:s>
                     <a:s r="132">
                        <a:s r="131">
                           <a:s>
                              <a:s>&quot;Opioid Medication Periods&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> Period</a:s>
                     </a:s>
                  </a:s>
                  <a:s>&#xd;
		</a:s>
                  <a:s>
                     <a:s>let </a:s>
                     <a:s r="138">
                        <a:s>NextIndex: </a:s>
                        <a:s r="137">
                           <a:s r="135">
                              <a:s>IndexOf(</a:s>
                              <a:s r="133">
                                 <a:s>&quot;Opioid Medication Periods&quot;</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="134">
                                 <a:s>Period</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s r="136">+ 1</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>&#xd;
		</a:s>
                  <a:s r="142">
                     <a:s>where </a:s>
                     <a:s r="142">
                        <a:s r="139">
                           <a:s>NextIndex</a:s>
                        </a:s>
                        <a:s> &lt; </a:s>
                        <a:s r="141">
                           <a:s>Length(</a:s>
                           <a:s r="140">
                              <a:s>&quot;Opioid Medication Periods&quot;</a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>&#xd;
		</a:s>
                  <a:s r="150">
                     <a:s>return </a:s>
                     <a:s r="149">
                        <a:s>Interval ( &#xd;
		</a:s>
                        <a:s r="144">
                           <a:s>end of </a:s>
                           <a:s r="143">
                              <a:s>Period</a:s>
                           </a:s>
                        </a:s>
                        <a:s>, </a:s>
                        <a:s r="148">
                           <a:s>start of </a:s>
                           <a:s r="147">
                              <a:s r="145">
                                 <a:s>&quot;Opioid Medication Periods&quot;</a:s>
                              </a:s>
                              <a:s>[</a:s>
                              <a:s r="146">
                                 <a:s>NextIndex</a:s>
                              </a:s>
                              <a:s>]</a:s>
                           </a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="151" locator="130:2-134:65" xsi:type="Query">
            <source localId="132" locator="130:2-130:35" alias="Period">
               <expression localId="131" locator="130:2-130:28" name="Opioid Medication Periods" xsi:type="ExpressionRef"/>
            </source>
            <let localId="138" locator="131:7-131:64" identifier="NextIndex">
               <expression localId="137" locator="131:18-131:64" xsi:type="Add">
                  <operand localId="135" locator="131:18-131:61" xsi:type="IndexOf">
                     <source localId="133" locator="131:26-131:52" name="Opioid Medication Periods" xsi:type="ExpressionRef"/>
                     <element localId="134" locator="131:55-131:60" name="Period" xsi:type="AliasRef"/>
                  </operand>
                  <operand localId="136" locator="131:64" valueType="t:Integer" value="1" xsi:type="Literal"/>
               </expression>
            </let>
            <where localId="142" locator="132:3-132:55" xsi:type="Less">
               <operand localId="139" locator="132:9-132:17" name="NextIndex" xsi:type="QueryLetRef"/>
               <operand localId="141" locator="132:21-132:55" xsi:type="Length">
                  <operand localId="140" locator="132:28-132:54" name="Opioid Medication Periods" xsi:type="ExpressionRef"/>
               </operand>
            </where>
            <return localId="150" locator="133:3-134:65">
               <expression localId="149" locator="133:10-134:65" lowClosed="false" highClosed="false" xsi:type="Interval">
                  <low localId="144" locator="134:3-134:15" xsi:type="End">
                     <operand localId="143" locator="134:10-134:15" name="Period" xsi:type="AliasRef"/>
                  </low>
                  <high localId="148" locator="134:18-134:64" xsi:type="Start">
                     <operand localId="147" locator="134:27-134:64" xsi:type="Indexer">
                        <operand localId="145" locator="134:27-134:53" name="Opioid Medication Periods" xsi:type="ExpressionRef"/>
                        <operand localId="146" locator="134:55-134:63" name="NextIndex" xsi:type="QueryLetRef"/>
                     </operand>
                  </high>
               </expression>
            </return>
         </expression>
      </def>
      <def localId="160" locator="70:1-73:35" name="Gaps in Active Opioid Period Greater Than 7 Days" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="160">
               <a:s>define &quot;Gaps in Active Opioid Period Greater Than 7 Days&quot;:&#xd;
	/*Assesses for gaps of more than 7 days between opioid medications*/&#xd;
	</a:s>
               <a:s r="159">
                  <a:s>
                     <a:s r="154">
                        <a:s r="153">
                           <a:s>
                              <a:s>&quot;Gaps in Active Opioid Period&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> Gap</a:s>
                     </a:s>
                  </a:s>
                  <a:s>&#xd;
		</a:s>
                  <a:s r="158">
                     <a:s>where </a:s>
                     <a:s r="158">
                        <a:s r="156">
                           <a:s>duration in days of </a:s>
                           <a:s r="155">
                              <a:s>Gap</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="157"> > 7</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="159" locator="72:2-73:35" xsi:type="Query">
            <source localId="154" locator="72:2-72:35" alias="Gap">
               <expression localId="153" locator="72:2-72:31" name="Gaps in Active Opioid Period" xsi:type="ExpressionRef"/>
            </source>
            <where localId="158" locator="73:3-73:35" xsi:type="Greater">
               <operand localId="156" locator="73:9-73:31" precision="Day" xsi:type="DurationBetween">
                  <operand xsi:type="Start">
                     <operand localId="155" locator="73:29-73:31" name="Gap" xsi:type="AliasRef"/>
                  </operand>
                  <operand xsi:type="End">
                     <operand localId="155" locator="73:29-73:31" name="Gap" xsi:type="AliasRef"/>
                  </operand>
               </operand>
               <operand localId="157" locator="73:35" valueType="t:Integer" value="7" xsi:type="Literal"/>
            </where>
         </expression>
      </def>
      <def localId="186" locator="102:1-110:14" name="Overall Active Opioid Period" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="186">
               <a:s>define &quot;Overall Active Opioid Period&quot;:&#xd;
	/*The overall period of an active opioid medications from the start of first opioid medication to end of last opioid medication during the measurement period*/&#xd;
	</a:s>
               <a:s r="185">
                  <a:s>Interval[</a:s>
                  <a:s r="174">
                     <a:s>start of </a:s>
                     <a:s r="173">
                        <a:s r="172">
                           <a:s>First(</a:s>
                           <a:s r="171">
                              <a:s>
                                 <a:s r="166">
                                    <a:s r="165">
                                       <a:s>
                                          <a:s>&quot;Opioid Medication Periods in Measurement Period&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> OpioidPeriod</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>&#xd;
			</a:s>
                              <a:s r="170">
                                 <a:s>sort by </a:s>
                                 <a:s r="169">
                                    <a:s r="168">
                                       <a:s>start of </a:s>
                                       <a:s r="167">
                                          <a:s>periodInMP</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>&#xd;
	)</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="173">
                           <a:s>periodInMP</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>, &#xd;
	</a:s>
                  <a:s r="184">
                     <a:s>end of </a:s>
                     <a:s r="183">
                        <a:s r="182">
                           <a:s>Last(</a:s>
                           <a:s r="181">
                              <a:s>
                                 <a:s r="176">
                                    <a:s r="175">
                                       <a:s>
                                          <a:s>&quot;Opioid Medication Periods in Measurement Period&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> OpioidPeriod</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>&#xd;
			</a:s>
                              <a:s r="180">
                                 <a:s>sort by &#xd;
			</a:s>
                                 <a:s r="179">
                                    <a:s r="178">
                                       <a:s>end of </a:s>
                                       <a:s r="177">
                                          <a:s>periodInMP</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>&#xd;
	)</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="183">
                           <a:s>periodInMP</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>]</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="185" locator="104:2-110:14" lowClosed="true" highClosed="true" xsi:type="Interval">
            <low localId="174" locator="104:11-106:13" xsi:type="Start">
               <operand localId="173" locator="104:20-106:13" path="periodInMP" xsi:type="Property">
                  <source localId="172" locator="104:20-106:2" xsi:type="First">
                     <source localId="171" locator="104:26-105:30" xsi:type="Query">
                        <source localId="166" locator="104:26-104:87" alias="OpioidPeriod">
                           <expression localId="165" locator="104:26-104:74" name="Opioid Medication Periods in Measurement Period" xsi:type="ExpressionRef"/>
                        </source>
                        <sort localId="170" locator="105:4-105:30">
                           <by localId="169" locator="105:12-105:30" direction="asc" xsi:type="ByExpression">
                              <expression localId="168" locator="105:12-105:30" xsi:type="Start">
                                 <operand localId="167" locator="105:21-105:30" name="periodInMP" xsi:type="IdentifierRef"/>
                              </expression>
                           </by>
                        </sort>
                     </source>
                  </source>
               </operand>
            </low>
            <high localId="184" locator="107:2-110:13" xsi:type="End">
               <operand localId="183" locator="107:9-110:13" path="periodInMP" xsi:type="Property">
                  <source localId="182" locator="107:9-110:2" xsi:type="Last">
                     <source localId="181" locator="107:14-109:20" xsi:type="Query">
                        <source localId="176" locator="107:14-107:75" alias="OpioidPeriod">
                           <expression localId="175" locator="107:14-107:62" name="Opioid Medication Periods in Measurement Period" xsi:type="ExpressionRef"/>
                        </source>
                        <sort localId="180" locator="108:4-109:20">
                           <by localId="179" locator="109:4-109:20" direction="asc" xsi:type="ByExpression">
                              <expression localId="178" locator="109:4-109:20" xsi:type="End">
                                 <operand localId="177" locator="109:11-109:20" name="periodInMP" xsi:type="IdentifierRef"/>
                              </expression>
                           </by>
                        </sort>
                     </source>
                  </source>
               </operand>
            </high>
         </expression>
      </def>
      <def localId="226" locator="146:1-162:41" name="Active Periods with Allowed Gaps" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="226">
               <a:s>define &quot;Active Periods with Allowed Gaps&quot;:&#xd;
	/*Creates a list of periods with gaps that are 7 days or less*/&#xd;
	</a:s>
               <a:s r="225">
                  <a:s>if </a:s>
                  <a:s r="164">
                     <a:s r="162">
                        <a:s>Length(</a:s>
                        <a:s r="161">
                           <a:s>&quot;Gaps in Active Opioid Period Greater Than 7 Days&quot;</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                     <a:s r="163">&lt; 1</a:s>
                  </a:s>
                  <a:s>&#xd;
	/*If there are no gaps, use the overall period &#xd;
	                                                                     */ then </a:s>
                  <a:s r="188">
                     <a:s>{ </a:s>
                     <a:s r="187">
                        <a:s>&quot;Overall Active Opioid Period&quot;</a:s>
                     </a:s>
                     <a:s> }</a:s>
                  </a:s>
                  <a:s> &#xd;
		else &#xd;
	/*First interval from start of overall period to first gap&#xd;
	                                                                       */ </a:s>
                  <a:s r="224">
                     <a:s r="196">
                        <a:s>{ </a:s>
                        <a:s r="195">
                           <a:s>Interval[</a:s>
                           <a:s r="190">
                              <a:s>start of </a:s>
                              <a:s r="189">
                                 <a:s>&quot;Overall Active Opioid Period&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s>, </a:s>
                           <a:s r="194">
                              <a:s>start of </a:s>
                              <a:s r="193">
                                 <a:s r="191">
                                    <a:s>&quot;Gaps in Active Opioid Period Greater Than 7 Days&quot;</a:s>
                                 </a:s>
                                 <a:s r="192">[0]</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s> }</a:s>
                     </a:s>
                     <a:s>&#xd;
		union &#xd;
	/*Rest of intervals. For each: start at end of current gap, end at end of next gap or end of overall period&#xd;
	*/ </a:s>
                     <a:s r="223">
                        <a:s>
                           <a:s r="198">
                              <a:s r="197">
                                 <a:s>
                                    <a:s>&quot;Gaps in Active Opioid Period Greater Than 7 Days&quot;</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> Gap</a:s>
                           </a:s>
                        </a:s>
                        <a:s>&#xd;
			</a:s>
                        <a:s>
                           <a:s>let </a:s>
                           <a:s r="204">
                              <a:s>NextGapIndex: </a:s>
                              <a:s r="203">
                                 <a:s r="201">
                                    <a:s>IndexOf(</a:s>
                                    <a:s r="199">
                                       <a:s>&quot;Gaps in Active Opioid Period Greater Than 7 Days&quot;</a:s>
                                    </a:s>
                                    <a:s>, </a:s>
                                    <a:s r="200">
                                       <a:s>Gap</a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                                 <a:s r="202">+ 1</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>&#xd;
			</a:s>
                        <a:s r="222">
                           <a:s>return </a:s>
                           <a:s r="221">
                              <a:s>if </a:s>
                              <a:s r="208">
                                 <a:s r="205">
                                    <a:s>NextGapIndex</a:s>
                                 </a:s>
                                 <a:s> &lt; </a:s>
                                 <a:s r="207">
                                    <a:s>Length(</a:s>
                                    <a:s r="206">
                                       <a:s>&quot;Gaps in Active Opioid Period Greater Than 7 Days&quot;</a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>then </a:s>
                              <a:s r="215">
                                 <a:s>Interval ( &#xd;
			</a:s>
                                 <a:s r="210">
                                    <a:s>end of </a:s>
                                    <a:s r="209">
                                       <a:s>Gap</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="214">
                                    <a:s>start of </a:s>
                                    <a:s r="213">
                                       <a:s r="211">
                                          <a:s>&quot;Gaps in Active Opioid Period Greater Than 7 Days&quot;</a:s>
                                       </a:s>
                                       <a:s>[</a:s>
                                       <a:s r="212">
                                          <a:s>NextGapIndex</a:s>
                                       </a:s>
                                       <a:s>]</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                              <a:s> &#xd;
				else </a:s>
                              <a:s r="220">
                                 <a:s>Interval ( &#xd;
			</a:s>
                                 <a:s r="217">
                                    <a:s>end of </a:s>
                                    <a:s r="216">
                                       <a:s>Gap</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>, &#xd;
			</a:s>
                                 <a:s r="219">
                                    <a:s>end of </a:s>
                                    <a:s r="218">
                                       <a:s>&quot;Overall Active Opioid Period&quot;</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>]</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="225" locator="148:2-162:41" xsi:type="If">
            <condition asType="t:Boolean" xsi:type="As">
               <operand localId="164" locator="148:5-148:65" xsi:type="Less">
                  <operand localId="162" locator="148:5-148:62" xsi:type="Length">
                     <operand localId="161" locator="148:12-148:61" name="Gaps in Active Opioid Period Greater Than 7 Days" xsi:type="ExpressionRef"/>
                  </operand>
                  <operand localId="163" locator="148:65" valueType="t:Integer" value="1" xsi:type="Literal"/>
               </operand>
            </condition>
            <then localId="188" locator="150:79-150:112" xsi:type="List">
               <element localId="187" locator="150:81-150:110" name="Overall Active Opioid Period" xsi:type="ExpressionRef"/>
            </then>
            <else localId="224" locator="153:76-162:41" xsi:type="Union">
               <operand localId="196" locator="153:76-153:192" xsi:type="List">
                  <element localId="195" locator="153:78-153:190" lowClosed="true" highClosed="false" xsi:type="Interval">
                     <low localId="190" locator="153:87-153:125" xsi:type="Start">
                        <operand localId="189" locator="153:96-153:125" name="Overall Active Opioid Period" xsi:type="ExpressionRef"/>
                     </low>
                     <high localId="194" locator="153:128-153:189" xsi:type="Start">
                        <operand localId="193" locator="153:137-153:189" xsi:type="Indexer">
                           <operand localId="191" locator="153:137-153:186" name="Gaps in Active Opioid Period Greater Than 7 Days" xsi:type="ExpressionRef"/>
                           <operand localId="192" locator="153:188" valueType="t:Integer" value="0" xsi:type="Literal"/>
                        </operand>
                     </high>
                  </element>
               </operand>
               <operand localId="223" locator="156:5-162:41" xsi:type="Query">
                  <source localId="198" locator="156:5-156:58" alias="Gap">
                     <expression localId="197" locator="156:5-156:54" name="Gaps in Active Opioid Period Greater Than 7 Days" xsi:type="ExpressionRef"/>
                  </source>
                  <let localId="204" locator="157:8-157:88" identifier="NextGapIndex">
                     <expression localId="203" locator="157:22-157:88" xsi:type="Add">
                        <operand localId="201" locator="157:22-157:85" xsi:type="IndexOf">
                           <source localId="199" locator="157:30-157:79" name="Gaps in Active Opioid Period Greater Than 7 Days" xsi:type="ExpressionRef"/>
                           <element localId="200" locator="157:82-157:84" name="Gap" xsi:type="AliasRef"/>
                        </operand>
                        <operand localId="202" locator="157:88" valueType="t:Integer" value="1" xsi:type="Literal"/>
                     </expression>
                  </let>
                  <return localId="222" locator="158:4-162:41">
                     <expression localId="221" locator="158:11-162:41" xsi:type="If">
                        <condition asType="t:Boolean" xsi:type="As">
                           <operand localId="208" locator="158:14-158:86" xsi:type="Less">
                              <operand localId="205" locator="158:14-158:25" name="NextGapIndex" xsi:type="QueryLetRef"/>
                              <operand localId="207" locator="158:29-158:86" xsi:type="Length">
                                 <operand localId="206" locator="158:36-158:85" name="Gaps in Active Opioid Period Greater Than 7 Days" xsi:type="ExpressionRef"/>
                              </operand>
                           </operand>
                        </condition>
                        <then localId="215" locator="158:92-159:89" lowClosed="false" highClosed="false" xsi:type="Interval">
                           <low localId="210" locator="159:4-159:13" xsi:type="End">
                              <operand localId="209" locator="159:11-159:13" name="Gap" xsi:type="AliasRef"/>
                           </low>
                           <high localId="214" locator="159:16-159:88" xsi:type="Start">
                              <operand localId="213" locator="159:25-159:88" xsi:type="Indexer">
                                 <operand localId="211" locator="159:25-159:74" name="Gaps in Active Opioid Period Greater Than 7 Days" xsi:type="ExpressionRef"/>
                                 <operand localId="212" locator="159:76-159:87" name="NextGapIndex" xsi:type="QueryLetRef"/>
                              </operand>
                           </high>
                        </then>
                        <else localId="220" locator="160:10-162:41" lowClosed="false" highClosed="true" xsi:type="Interval">
                           <low localId="217" locator="161:4-161:13" xsi:type="End">
                              <operand localId="216" locator="161:11-161:13" name="Gap" xsi:type="AliasRef"/>
                           </low>
                           <high localId="219" locator="162:4-162:40" xsi:type="End">
                              <operand localId="218" locator="162:11-162:40" name="Overall Active Opioid Period" xsi:type="ExpressionRef"/>
                           </high>
                        </else>
                     </expression>
                  </return>
               </operand>
            </else>
         </expression>
      </def>
      <def localId="261" locator="243:1-247:2" name="CumulativeDuration" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="261">
               <a:s>define function &quot;CumulativeDuration&quot;(Periods </a:s>
               <a:s r="252">
                  <a:s>List&lt;</a:s>
                  <a:s r="251">
                     <a:s>Interval&lt;</a:s>
                     <a:s r="250">
                        <a:s>DateTime</a:s>
                     </a:s>
                     <a:s>></a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):&#xd;
	/*Adds the total number of days of opioid prescription(s)*/&#xd;
	</a:s>
               <a:s r="260">
                  <a:s r="260">
                     <a:s>Sum(</a:s>
                     <a:s r="259">
                        <a:s>
                           <a:s r="255">
                              <a:s r="254">
                                 <a:s>(</a:s>
                                 <a:s r="254">
                                    <a:s>collapse</a:s>
                                    <a:s r="253">
                                       <a:s>(</a:s>
                                       <a:s r="253">
                                          <a:s>Periods</a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                              <a:s>Period</a:s>
                           </a:s>
                        </a:s>
                        <a:s>&#xd;
			</a:s>
                        <a:s r="258">
                           <a:s>return all </a:s>
                           <a:s r="257">
                              <a:s>duration in days of </a:s>
                              <a:s r="256">
                                 <a:s>Period</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>&#xd;
	)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="260" locator="245:2-247:2" xsi:type="Sum">
            <source localId="259" locator="245:6-246:40" xsi:type="Query">
               <source localId="255" locator="245:6-245:30" alias="Period">
                  <expression localId="254" locator="245:6-245:24" xsi:type="Collapse">
                     <operand localId="253" locator="245:15-245:23" name="Periods" xsi:type="OperandRef"/>
                     <operand resultTypeName="t:Quantity" xsi:type="Null"/>
                  </expression>
               </source>
               <return localId="258" locator="246:4-246:40" distinct="false">
                  <expression localId="257" locator="246:15-246:40" precision="Day" xsi:type="DurationBetween">
                     <operand xsi:type="Start">
                        <operand localId="256" locator="246:35-246:40" name="Period" xsi:type="AliasRef"/>
                     </operand>
                     <operand xsi:type="End">
                        <operand localId="256" locator="246:35-246:40" name="Period" xsi:type="AliasRef"/>
                     </operand>
                  </expression>
               </return>
            </source>
         </expression>
         <operand name="Periods">
            <operandTypeSpecifier localId="252" locator="243:46-243:69" xsi:type="ListTypeSpecifier">
               <elementType localId="251" locator="243:51-243:68" xsi:type="IntervalTypeSpecifier">
                  <pointType localId="250" locator="243:60-243:67" name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
               </elementType>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="266" locator="164:1-177:3" name="Active Periods with Allowed Gaps with Meds and Durations" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="266">
               <a:s>define &quot;Active Periods with Allowed Gaps with Meds and Durations&quot;:&#xd;
	/*Provides a list of each period with allowed gaps with the opioid medications that are within the same 90 or more day period*/&#xd;
	</a:s>
               <a:s r="265">
                  <a:s>
                     <a:s r="228">
                        <a:s r="227">
                           <a:s>
                              <a:s>&quot;Active Periods with Allowed Gaps&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> Period</a:s>
                     </a:s>
                  </a:s>
                  <a:s>&#xd;
		</a:s>
                  <a:s>
                     <a:s>let </a:s>
                     <a:s r="236">
                        <a:s>Meds: </a:s>
                        <a:s r="235">
                           <a:s>( </a:s>
                           <a:s r="235">
                              <a:s>
                                 <a:s r="230">
                                    <a:s r="229">
                                       <a:s>
                                          <a:s>&quot;Opioid Medication Periods in Measurement Period&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> Opioid</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>&#xd;
				</a:s>
                              <a:s r="234">
                                 <a:s>where </a:s>
                                 <a:s r="234">
                                    <a:s r="232">
                                       <a:s r="231">
                                          <a:s>Opioid</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="232">
                                          <a:s>periodInMP</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s r="234"> during </a:s>
                                    <a:s r="233">
                                       <a:s>Period</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>&#xd;
		)</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>&#xd;
		</a:s>
                  <a:s r="264">
                     <a:s>return </a:s>
                     <a:s r="263">
                        <a:s>{&#xd;
			</a:s>
                        <a:s>
                           <a:s>period: </a:s>
                           <a:s r="237">
                              <a:s>Period</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,&#xd;
			</a:s>
                        <a:s>
                           <a:s>meds: </a:s>
                           <a:s r="243">
                              <a:s>
                                 <a:s r="239">
                                    <a:s r="238">
                                       <a:s>
                                          <a:s>Meds</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> Med</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>&#xd;
				</a:s>
                              <a:s r="242">
                                 <a:s>return </a:s>
                                 <a:s r="241">
                                    <a:s r="240">
                                       <a:s>Med</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="241">
                                       <a:s>med</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,&#xd;
			</a:s>
                        <a:s>
                           <a:s>cmd: </a:s>
                           <a:s r="262">
                              <a:s>&quot;CumulativeDuration&quot;(</a:s>
                              <a:s r="249">
                                 <a:s>
                                    <a:s r="245">
                                       <a:s r="244">
                                          <a:s>
                                             <a:s>Meds</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> Med</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>&#xd;
					</a:s>
                                 <a:s r="248">
                                    <a:s>return </a:s>
                                    <a:s r="247">
                                       <a:s r="246">
                                          <a:s>Med</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="247">
                                          <a:s>periodInMP</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>&#xd;
			)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>&#xd;
		}</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="265" locator="166:2-177:3" xsi:type="Query">
            <source localId="228" locator="166:2-166:42" alias="Period">
               <expression localId="227" locator="166:2-166:35" name="Active Periods with Allowed Gaps" xsi:type="ExpressionRef"/>
            </source>
            <let localId="236" locator="167:7-169:3" identifier="Meds">
               <expression localId="235" locator="167:13-169:3" xsi:type="Query">
                  <source localId="230" locator="167:15-167:70" alias="Opioid">
                     <expression localId="229" locator="167:15-167:63" name="Opioid Medication Periods in Measurement Period" xsi:type="ExpressionRef"/>
                  </source>
                  <where localId="234" locator="168:5-168:41" xsi:type="IncludedIn">
                     <operand localId="232" locator="168:11-168:27" path="periodInMP" scope="Opioid" xsi:type="Property"/>
                     <operand localId="233" locator="168:36-168:41" name="Period" xsi:type="AliasRef"/>
                  </where>
               </expression>
            </let>
            <return localId="264" locator="170:3-177:3">
               <expression localId="263" locator="170:10-177:3" xsi:type="Tuple">
                  <element name="period">
                     <value localId="237" locator="171:12-171:17" name="Period" xsi:type="AliasRef"/>
                  </element>
                  <element name="meds">
                     <value localId="243" locator="172:10-173:18" xsi:type="Query">
                        <source localId="239" locator="172:10-172:17" alias="Med">
                           <expression localId="238" locator="172:10-172:13" name="Meds" xsi:type="QueryLetRef"/>
                        </source>
                        <return localId="242" locator="173:5-173:18">
                           <expression localId="241" locator="173:12-173:18" path="med" scope="Med" xsi:type="Property"/>
                        </return>
                     </value>
                  </element>
                  <element name="cmd">
                     <value localId="262" locator="174:9-176:4" name="CumulativeDuration" xsi:type="FunctionRef">
                        <operand localId="249" locator="174:30-175:26" xsi:type="Query">
                           <source localId="245" locator="174:30-174:37" alias="Med">
                              <expression localId="244" locator="174:30-174:33" name="Meds" xsi:type="QueryLetRef"/>
                           </source>
                           <return localId="248" locator="175:6-175:26">
                              <expression localId="247" locator="175:13-175:26" path="periodInMP" scope="Med" xsi:type="Property"/>
                           </return>
                        </operand>
                     </value>
                  </element>
               </expression>
            </return>
         </expression>
      </def>
      <def localId="274" locator="179:1-182:24" name="Active Periods with and without Gaps and Cumulative Medication Duration of 90 or More Days" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="274">
               <a:s>define &quot;Active Periods with and without Gaps and Cumulative Medication Duration of 90 or More Days&quot;:&#xd;
	/*Creates a list of periods where Cumulative Medication Duration greater than or equal to 90 days. The logic filters the result of Periods with Allowed Gaps with Meds and Durations result to only include the periods with a CMD greater or equal to 90. If there are any periods after the filter, and the patient has an encounter during the MP then they are in the Initial Population*/&#xd;
	</a:s>
               <a:s r="273">
                  <a:s>
                     <a:s r="268">
                        <a:s r="267">
                           <a:s>
                              <a:s>&quot;Active Periods with Allowed Gaps with Meds and Durations&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> Period</a:s>
                     </a:s>
                  </a:s>
                  <a:s>&#xd;
		</a:s>
                  <a:s r="272">
                     <a:s>where </a:s>
                     <a:s r="272">
                        <a:s r="270">
                           <a:s r="269">
                              <a:s>Period</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="270">
                              <a:s>cmd</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="271"> >= 90</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="273" locator="181:2-182:24" xsi:type="Query">
            <source localId="268" locator="181:2-181:66" alias="Period">
               <expression localId="267" locator="181:2-181:59" name="Active Periods with Allowed Gaps with Meds and Durations" xsi:type="ExpressionRef"/>
            </source>
            <where localId="272" locator="182:3-182:24" xsi:type="GreaterOrEqual">
               <operand localId="270" locator="182:9-182:18" path="cmd" scope="Period" xsi:type="Property"/>
               <operand localId="271" locator="182:23-182:24" valueType="t:Integer" value="90" xsi:type="Literal"/>
            </where>
         </expression>
      </def>
      <def localId="278" locator="184:1-188:109" name="Initial Population" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="278">
               <a:s>define &quot;Initial Population&quot;:&#xd;
	/*Patients age 18 and older who have an encounter during the measurement period, are prescribed opioids for 90 days or more and have 7 days or less between opioid prescriptions*/&#xd;
	</a:s>
               <a:s r="277">
                  <a:s r="103">
                     <a:s r="82">
                        <a:s r="80">
                           <a:s r="75">
                              <a:s>Global</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="80">
                              <a:s>CalendarAgeInYearsAt(</a:s>
                              <a:s r="77">
                                 <a:s r="76">
                                    <a:s>Patient</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="77">
                                    <a:s>birthDatetime</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="79">
                                 <a:s>start of </a:s>
                                 <a:s r="78">
                                    <a:s>&quot;Measurement Period&quot;</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="81">>= 18</a:s>
                     </a:s>
                     <a:s>&#xd;
		and </a:s>
                     <a:s r="102">
                        <a:s>exists </a:s>
                        <a:s r="101">
                           <a:s>( </a:s>
                           <a:s r="101">
                              <a:s>&quot;Encounters during Measurement Period&quot;</a:s>
                           </a:s>
                           <a:s> )</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>&#xd;
		and </a:s>
                  <a:s r="276">
                     <a:s>exists </a:s>
                     <a:s r="275">
                        <a:s>( </a:s>
                        <a:s r="275">
                           <a:s>&quot;Active Periods with and without Gaps and Cumulative Medication Duration of 90 or More Days&quot;</a:s>
                        </a:s>
                        <a:s> )</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="277" locator="186:2-188:109" xsi:type="And">
            <operand localId="103" locator="186:2-187:55" xsi:type="And">
               <operand localId="82" locator="186:2-186:87" xsi:type="GreaterOrEqual">
                  <operand localId="80" locator="186:2-186:82" name="CalendarAgeInYearsAt" libraryName="Global" xsi:type="FunctionRef">
                     <operand localId="77" locator="186:30-186:50" path="birthDatetime" xsi:type="Property">
                        <source localId="76" locator="186:30-186:36" name="Patient" xsi:type="ExpressionRef"/>
                     </operand>
                     <operand localId="79" locator="186:53-186:81" xsi:type="Start">
                        <operand localId="78" locator="186:62-186:81" name="Measurement Period" xsi:type="ParameterRef"/>
                     </operand>
                  </operand>
                  <operand localId="81" locator="186:86-186:87" valueType="t:Integer" value="18" xsi:type="Literal"/>
               </operand>
               <operand localId="102" locator="187:7-187:55" xsi:type="Exists">
                  <operand localId="101" locator="187:14-187:55" name="Encounters during Measurement Period" xsi:type="ExpressionRef"/>
               </operand>
            </operand>
            <operand localId="276" locator="188:7-188:109" xsi:type="Exists">
               <operand localId="275" locator="188:14-188:109" name="Active Periods with and without Gaps and Cumulative Medication Duration of 90 or More Days" xsi:type="ExpressionRef"/>
            </operand>
         </expression>
      </def>
      <def localId="280" locator="66:1-68:21" name="Denominator" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="280">
               <a:s>define &quot;Denominator&quot;:&#xd;
	/*Includes all patients in the initial population*/&#xd;
	</a:s>
               <a:s r="279">
                  <a:s>&quot;Initial Population&quot;</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="279" locator="68:2-68:21" name="Initial Population" xsi:type="ExpressionRef"/>
      </def>
      <def localId="403" locator="216:1-241:4" name="DosesPerDay" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="403">
               <a:s>define function &quot;DosesPerDay&quot;(frequency </a:s>
               <a:s r="295">
                  <a:s>Code</a:s>
               </a:s>
               <a:s>):&#xd;
	/*Calculates the cumulative dose per day for each prescription*/&#xd;
	</a:s>
               <a:s r="402">
                  <a:s r="402">
                     <a:s>case&#xd;
		</a:s>
                     <a:s r="300">
                        <a:s>when </a:s>
                        <a:s r="298">
                           <a:s r="296">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="297">
                              <a:s>&quot;Once daily (qualifier value)&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="299"> then 1.0</a:s>
                     </a:s>
                     <a:s>&#xd;
		</a:s>
                     <a:s r="305">
                        <a:s>when </a:s>
                        <a:s r="303">
                           <a:s r="301">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="302">
                              <a:s>&quot;Twice a day (qualifier value)&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="304"> then 2.0</a:s>
                     </a:s>
                     <a:s>&#xd;
		</a:s>
                     <a:s r="310">
                        <a:s>when </a:s>
                        <a:s r="308">
                           <a:s r="306">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="307">
                              <a:s>&quot;Three times daily (qualifier value)&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="309"> then 3.0</a:s>
                     </a:s>
                     <a:s>&#xd;
		</a:s>
                     <a:s r="315">
                        <a:s>when </a:s>
                        <a:s r="313">
                           <a:s r="311">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="312">
                              <a:s>&quot;Four times daily (qualifier value)&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="314"> then 4.0</a:s>
                     </a:s>
                     <a:s>&#xd;
		</a:s>
                     <a:s r="320">
                        <a:s>when </a:s>
                        <a:s r="318">
                           <a:s r="316">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="317">
                              <a:s>&quot;Every twenty four hours (qualifier value)&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="319"> then 1.0</a:s>
                     </a:s>
                     <a:s>&#xd;
		</a:s>
                     <a:s r="325">
                        <a:s>when </a:s>
                        <a:s r="323">
                           <a:s r="321">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="322">
                              <a:s>&quot;Every twelve hours (qualifier value)&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="324"> then 2.0</a:s>
                     </a:s>
                     <a:s>&#xd;
		</a:s>
                     <a:s r="330">
                        <a:s>when </a:s>
                        <a:s r="328">
                           <a:s r="326">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="327">
                              <a:s>&quot;Every thirty six hours (qualifier value)&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="329"> then 0.67</a:s>
                     </a:s>
                     <a:s>&#xd;
		</a:s>
                     <a:s r="335">
                        <a:s>when </a:s>
                        <a:s r="333">
                           <a:s r="331">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="332">
                              <a:s>&quot;Every eight hours (qualifier value)&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="334"> then 3.0</a:s>
                     </a:s>
                     <a:s>&#xd;
		</a:s>
                     <a:s r="340">
                        <a:s>when </a:s>
                        <a:s r="338">
                           <a:s r="336">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="337">
                              <a:s>&quot;Every four hours (qualifier value)&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="339"> then 6.0</a:s>
                     </a:s>
                     <a:s>&#xd;
		</a:s>
                     <a:s r="345">
                        <a:s>when </a:s>
                        <a:s r="343">
                           <a:s r="341">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="342">
                              <a:s>&quot;Every six hours (qualifier value)&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="344"> then 4.0</a:s>
                     </a:s>
                     <a:s>&#xd;
		</a:s>
                     <a:s r="350">
                        <a:s>when </a:s>
                        <a:s r="348">
                           <a:s r="346">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="347">
                              <a:s>&quot;Every seventy two hours (qualifier value)&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="349"> then 0.34</a:s>
                     </a:s>
                     <a:s>&#xd;
		</a:s>
                     <a:s r="355">
                        <a:s>when </a:s>
                        <a:s r="353">
                           <a:s r="351">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="352">
                              <a:s>&quot;Every forty eight hours (qualifier value)&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="354"> then 0.5</a:s>
                     </a:s>
                     <a:s>&#xd;
		</a:s>
                     <a:s r="360">
                        <a:s>when </a:s>
                        <a:s r="358">
                           <a:s r="356">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="357">
                              <a:s>&quot;Every eight to twelve hours (qualifier value)&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="359"> then 2.0</a:s>
                     </a:s>
                     <a:s>&#xd;
		</a:s>
                     <a:s r="365">
                        <a:s>when </a:s>
                        <a:s r="363">
                           <a:s r="361">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="362">
                              <a:s>&quot;Every six to eight hours (qualifier value)&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="364"> then 3.0</a:s>
                     </a:s>
                     <a:s>&#xd;
		</a:s>
                     <a:s r="370">
                        <a:s>when </a:s>
                        <a:s r="368">
                           <a:s r="366">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="367">
                              <a:s>&quot;Every three to four hours (qualifier value)&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="369"> then 6.0</a:s>
                     </a:s>
                     <a:s>&#xd;
		</a:s>
                     <a:s r="375">
                        <a:s>when </a:s>
                        <a:s r="373">
                           <a:s r="371">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="372">
                              <a:s>&quot;Every three to six hours (qualifier value)&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="374"> then 4.0</a:s>
                     </a:s>
                     <a:s>&#xd;
		</a:s>
                     <a:s r="380">
                        <a:s>when </a:s>
                        <a:s r="378">
                           <a:s r="376">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="377">
                              <a:s>&quot;Every two to four hours (qualifier value)&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="379"> then 6.0</a:s>
                     </a:s>
                     <a:s>&#xd;
		</a:s>
                     <a:s r="385">
                        <a:s>when </a:s>
                        <a:s r="383">
                           <a:s r="381">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="382">
                              <a:s>&quot;One to four times a day (qualifier value)&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="384"> then 4.0</a:s>
                     </a:s>
                     <a:s>&#xd;
		</a:s>
                     <a:s r="390">
                        <a:s>when </a:s>
                        <a:s r="388">
                           <a:s r="386">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="387">
                              <a:s>&quot;One to three times a day (qualifier value)&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="389"> then 3.0</a:s>
                     </a:s>
                     <a:s>&#xd;
		</a:s>
                     <a:s r="395">
                        <a:s>when </a:s>
                        <a:s r="393">
                           <a:s r="391">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="392">
                              <a:s>&quot;One to two times a day (qualifier value)&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="394"> then 2.0</a:s>
                     </a:s>
                     <a:s>&#xd;
		</a:s>
                     <a:s r="400">
                        <a:s>when </a:s>
                        <a:s r="398">
                           <a:s r="396">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="397">
                              <a:s>&quot;Two to four times a day (qualifier value)&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="399"> then 4.0</a:s>
                     </a:s>
                     <a:s r="401"> &#xd;
		else null &#xd;
	end</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="402" locator="218:2-241:4" xsi:type="Case">
            <caseItem localId="300" locator="219:3-219:58">
               <when localId="298" locator="219:8-219:49" xsi:type="Equivalent">
                  <operand localId="296" locator="219:8-219:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="297" locator="219:20-219:49" name="Once daily (qualifier value)" xsi:type="CodeRef"/>
               </when>
               <then localId="299" locator="219:56-219:58" valueType="t:Decimal" value="1.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="305" locator="220:3-220:59">
               <when localId="303" locator="220:8-220:50" xsi:type="Equivalent">
                  <operand localId="301" locator="220:8-220:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="302" locator="220:20-220:50" name="Twice a day (qualifier value)" xsi:type="CodeRef"/>
               </when>
               <then localId="304" locator="220:57-220:59" valueType="t:Decimal" value="2.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="310" locator="221:3-221:65">
               <when localId="308" locator="221:8-221:56" xsi:type="Equivalent">
                  <operand localId="306" locator="221:8-221:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="307" locator="221:20-221:56" name="Three times daily (qualifier value)" xsi:type="CodeRef"/>
               </when>
               <then localId="309" locator="221:63-221:65" valueType="t:Decimal" value="3.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="315" locator="222:3-222:64">
               <when localId="313" locator="222:8-222:55" xsi:type="Equivalent">
                  <operand localId="311" locator="222:8-222:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="312" locator="222:20-222:55" name="Four times daily (qualifier value)" xsi:type="CodeRef"/>
               </when>
               <then localId="314" locator="222:62-222:64" valueType="t:Decimal" value="4.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="320" locator="223:3-223:71">
               <when localId="318" locator="223:8-223:62" xsi:type="Equivalent">
                  <operand localId="316" locator="223:8-223:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="317" locator="223:20-223:62" name="Every twenty four hours (qualifier value)" xsi:type="CodeRef"/>
               </when>
               <then localId="319" locator="223:69-223:71" valueType="t:Decimal" value="1.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="325" locator="224:3-224:66">
               <when localId="323" locator="224:8-224:57" xsi:type="Equivalent">
                  <operand localId="321" locator="224:8-224:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="322" locator="224:20-224:57" name="Every twelve hours (qualifier value)" xsi:type="CodeRef"/>
               </when>
               <then localId="324" locator="224:64-224:66" valueType="t:Decimal" value="2.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="330" locator="225:3-225:71">
               <when localId="328" locator="225:8-225:61" xsi:type="Equivalent">
                  <operand localId="326" locator="225:8-225:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="327" locator="225:20-225:61" name="Every thirty six hours (qualifier value)" xsi:type="CodeRef"/>
               </when>
               <then localId="329" locator="225:68-225:71" valueType="t:Decimal" value="0.67" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="335" locator="226:3-226:65">
               <when localId="333" locator="226:8-226:56" xsi:type="Equivalent">
                  <operand localId="331" locator="226:8-226:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="332" locator="226:20-226:56" name="Every eight hours (qualifier value)" xsi:type="CodeRef"/>
               </when>
               <then localId="334" locator="226:63-226:65" valueType="t:Decimal" value="3.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="340" locator="227:3-227:64">
               <when localId="338" locator="227:8-227:55" xsi:type="Equivalent">
                  <operand localId="336" locator="227:8-227:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="337" locator="227:20-227:55" name="Every four hours (qualifier value)" xsi:type="CodeRef"/>
               </when>
               <then localId="339" locator="227:62-227:64" valueType="t:Decimal" value="6.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="345" locator="228:3-228:63">
               <when localId="343" locator="228:8-228:54" xsi:type="Equivalent">
                  <operand localId="341" locator="228:8-228:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="342" locator="228:20-228:54" name="Every six hours (qualifier value)" xsi:type="CodeRef"/>
               </when>
               <then localId="344" locator="228:61-228:63" valueType="t:Decimal" value="4.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="350" locator="229:3-229:72">
               <when localId="348" locator="229:8-229:62" xsi:type="Equivalent">
                  <operand localId="346" locator="229:8-229:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="347" locator="229:20-229:62" name="Every seventy two hours (qualifier value)" xsi:type="CodeRef"/>
               </when>
               <then localId="349" locator="229:69-229:72" valueType="t:Decimal" value="0.34" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="355" locator="230:3-230:71">
               <when localId="353" locator="230:8-230:62" xsi:type="Equivalent">
                  <operand localId="351" locator="230:8-230:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="352" locator="230:20-230:62" name="Every forty eight hours (qualifier value)" xsi:type="CodeRef"/>
               </when>
               <then localId="354" locator="230:69-230:71" valueType="t:Decimal" value="0.5" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="360" locator="231:3-231:75">
               <when localId="358" locator="231:8-231:66" xsi:type="Equivalent">
                  <operand localId="356" locator="231:8-231:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="357" locator="231:20-231:66" name="Every eight to twelve hours (qualifier value)" xsi:type="CodeRef"/>
               </when>
               <then localId="359" locator="231:73-231:75" valueType="t:Decimal" value="2.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="365" locator="232:3-232:72">
               <when localId="363" locator="232:8-232:63" xsi:type="Equivalent">
                  <operand localId="361" locator="232:8-232:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="362" locator="232:20-232:63" name="Every six to eight hours (qualifier value)" xsi:type="CodeRef"/>
               </when>
               <then localId="364" locator="232:70-232:72" valueType="t:Decimal" value="3.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="370" locator="233:3-233:73">
               <when localId="368" locator="233:8-233:64" xsi:type="Equivalent">
                  <operand localId="366" locator="233:8-233:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="367" locator="233:20-233:64" name="Every three to four hours (qualifier value)" xsi:type="CodeRef"/>
               </when>
               <then localId="369" locator="233:71-233:73" valueType="t:Decimal" value="6.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="375" locator="234:3-234:72">
               <when localId="373" locator="234:8-234:63" xsi:type="Equivalent">
                  <operand localId="371" locator="234:8-234:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="372" locator="234:20-234:63" name="Every three to six hours (qualifier value)" xsi:type="CodeRef"/>
               </when>
               <then localId="374" locator="234:70-234:72" valueType="t:Decimal" value="4.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="380" locator="235:3-235:71">
               <when localId="378" locator="235:8-235:62" xsi:type="Equivalent">
                  <operand localId="376" locator="235:8-235:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="377" locator="235:20-235:62" name="Every two to four hours (qualifier value)" xsi:type="CodeRef"/>
               </when>
               <then localId="379" locator="235:69-235:71" valueType="t:Decimal" value="6.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="385" locator="236:3-236:71">
               <when localId="383" locator="236:8-236:62" xsi:type="Equivalent">
                  <operand localId="381" locator="236:8-236:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="382" locator="236:20-236:62" name="One to four times a day (qualifier value)" xsi:type="CodeRef"/>
               </when>
               <then localId="384" locator="236:69-236:71" valueType="t:Decimal" value="4.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="390" locator="237:3-237:72">
               <when localId="388" locator="237:8-237:63" xsi:type="Equivalent">
                  <operand localId="386" locator="237:8-237:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="387" locator="237:20-237:63" name="One to three times a day (qualifier value)" xsi:type="CodeRef"/>
               </when>
               <then localId="389" locator="237:70-237:72" valueType="t:Decimal" value="3.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="395" locator="238:3-238:70">
               <when localId="393" locator="238:8-238:61" xsi:type="Equivalent">
                  <operand localId="391" locator="238:8-238:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="392" locator="238:20-238:61" name="One to two times a day (qualifier value)" xsi:type="CodeRef"/>
               </when>
               <then localId="394" locator="238:68-238:70" valueType="t:Decimal" value="2.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="400" locator="239:3-239:71">
               <when localId="398" locator="239:8-239:62" xsi:type="Equivalent">
                  <operand localId="396" locator="239:8-239:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="397" locator="239:20-239:62" name="Two to four times a day (qualifier value)" xsi:type="CodeRef"/>
               </when>
               <then localId="399" locator="239:69-239:71" valueType="t:Decimal" value="4.0" xsi:type="Literal"/>
            </caseItem>
            <else asType="t:Decimal" xsi:type="As">
               <operand localId="401" locator="240:8-240:11" xsi:type="Null"/>
            </else>
         </expression>
         <operand name="frequency">
            <operandTypeSpecifier localId="295" locator="216:41-216:44" name="t:Code" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="437" locator="271:1-291:3" name="CalculateDailyMMEPerMedication" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="437">
               <a:s>define function &quot;CalculateDailyMMEPerMedication&quot;(medications </a:s>
               <a:s r="288">
                  <a:s>List&lt;</a:s>
                  <a:s r="287">
                     <a:s>&quot;Medication, Order&quot;</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>, period </a:s>
               <a:s r="290">
                  <a:s>Interval&lt;</a:s>
                  <a:s r="289">
                     <a:s>DateTime</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):&#xd;
	/*Calculates the daily MME by multiplying the single administration dosage by the frequency (number of times the dose is administered per day)*/&#xd;
	</a:s>
               <a:s r="436">
                  <a:s r="436">
                     <a:s>
                        <a:s r="292">
                           <a:s r="291">
                              <a:s>
                                 <a:s>medications</a:s>
                              </a:s>
                           </a:s>
                           <a:s> OpioidMed</a:s>
                        </a:s>
                     </a:s>
                     <a:s>&#xd;
		</a:s>
                     <a:s>
                        <a:s>let </a:s>
                        <a:s r="405">
                           <a:s>dosesPerDay: </a:s>
                           <a:s r="404">
                              <a:s>&quot;DosesPerDay&quot;(</a:s>
                              <a:s r="294">
                                 <a:s r="293">
                                    <a:s>OpioidMed</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="294">
                                    <a:s>frequency</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,&#xd;
		</a:s>
                        <a:s r="416">
                           <a:s>MME: </a:s>
                           <a:s r="415">
                              <a:s>singleton from </a:s>
                              <a:s r="414">
                                 <a:s>( </a:s>
                                 <a:s r="414">
                                    <a:s r="406">
                                       <a:s>OpioidConversionLogic</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="414">
                                       <a:s>&quot;CalculateMorphineMilligramEquivalents&quot;(</a:s>
                                       <a:s r="413">
                                          <a:s>{ </a:s>
                                          <a:s r="412">
                                             <a:s>{&#xd;
					</a:s>
                                             <a:s>
                                                <a:s>rxNormCode: </a:s>
                                                <a:s r="408">
                                                   <a:s r="407">
                                                      <a:s>OpioidMed</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="408">
                                                      <a:s>code</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>,&#xd;
					</a:s>
                                             <a:s>
                                                <a:s>doseQuantity: </a:s>
                                                <a:s r="410">
                                                   <a:s r="409">
                                                      <a:s>OpioidMed</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="410">
                                                      <a:s>dosage</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>,&#xd;
					</a:s>
                                             <a:s>
                                                <a:s>dosesPerDay: </a:s>
                                                <a:s r="411">
                                                   <a:s>dosesPerDay</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>&#xd;
				}</a:s>
                                          </a:s>
                                          <a:s> }</a:s>
                                       </a:s>
                                       <a:s>&#xd;
			)</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>&#xd;
		)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,&#xd;
		</a:s>
                        <a:s r="421">
                           <a:s>medPeriod: </a:s>
                           <a:s r="420">
                              <a:s r="418">
                                 <a:s r="417">
                                    <a:s>OpioidMed</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="418">
                                    <a:s>relevantPeriod</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>&#xd;
			intersect </a:s>
                              <a:s r="419">
                                 <a:s>period</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>&#xd;
		</a:s>
                     <a:s r="435">
                        <a:s>return </a:s>
                        <a:s r="434">
                           <a:s>{&#xd;
			</a:s>
                           <a:s>
                              <a:s>rxNormCode: </a:s>
                              <a:s r="423">
                                 <a:s r="422">
                                    <a:s>OpioidMed</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="423">
                                    <a:s>code</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>,&#xd;
			</a:s>
                           <a:s>
                              <a:s>authortime: </a:s>
                              <a:s r="425">
                                 <a:s r="424">
                                    <a:s>OpioidMed</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="425">
                                    <a:s>authorDatetime</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>,&#xd;
			</a:s>
                           <a:s>
                              <a:s>effectivePeriod: </a:s>
                              <a:s r="426">
                                 <a:s>medPeriod</a:s>
                              </a:s>
                           </a:s>
                           <a:s>,&#xd;
			</a:s>
                           <a:s>
                              <a:s>conversionFactor: </a:s>
                              <a:s r="428">
                                 <a:s r="427">
                                    <a:s>MME</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="428">
                                    <a:s>conversionFactor</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>,&#xd;
			</a:s>
                           <a:s>
                              <a:s>daysInPeriod: </a:s>
                              <a:s r="431">
                                 <a:s r="429">
                                    <a:s>Timing</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="431">
                                    <a:s>&quot;DaysInPeriod&quot;(</a:s>
                                    <a:s r="430">
                                       <a:s>medPeriod</a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>,&#xd;
			</a:s>
                           <a:s>
                              <a:s>mme: </a:s>
                              <a:s r="433">
                                 <a:s r="432">
                                    <a:s>MME</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="433">
                                    <a:s>MME</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>&#xd;
		}</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="436" locator="273:2-291:3" xsi:type="Query">
            <source localId="292" locator="273:2-273:22" alias="OpioidMed">
               <expression localId="291" locator="273:2-273:12" name="medications" xsi:type="OperandRef"/>
            </source>
            <let localId="405" locator="274:7-274:53" identifier="dosesPerDay">
               <expression localId="404" locator="274:20-274:53" name="DosesPerDay" xsi:type="FunctionRef">
                  <operand localId="294" locator="274:34-274:52" path="frequency" scope="OpioidMed" xsi:type="Property"/>
               </expression>
            </let>
            <let localId="416" locator="275:3-281:3" identifier="MME">
               <expression localId="415" locator="275:8-281:3" xsi:type="SingletonFrom">
                  <operand localId="414" locator="275:23-281:3" name="CalculateMorphineMilligramEquivalents" libraryName="OpioidConversionLogic" xsi:type="FunctionRef">
                     <operand localId="413" locator="275:87-279:7" xsi:type="List">
                        <element localId="412" locator="275:89-279:5" xsi:type="Tuple">
                           <element name="rxNormCode">
                              <value localId="408" locator="276:18-276:31" path="code" scope="OpioidMed" xsi:type="Property"/>
                           </element>
                           <element name="doseQuantity">
                              <value localId="410" locator="277:20-277:35" path="dosage" scope="OpioidMed" xsi:type="Property"/>
                           </element>
                           <element name="dosesPerDay">
                              <value localId="411" locator="278:19-278:29" name="dosesPerDay" xsi:type="QueryLetRef"/>
                           </element>
                        </element>
                     </operand>
                  </operand>
               </expression>
            </let>
            <let localId="421" locator="282:3-283:19" identifier="medPeriod">
               <expression localId="420" locator="282:14-283:19" xsi:type="Intersect">
                  <operand localId="418" locator="282:14-282:37" path="relevantPeriod" scope="OpioidMed" xsi:type="Property"/>
                  <operand localId="419" locator="283:14-283:19" name="period" xsi:type="OperandRef"/>
               </expression>
            </let>
            <return localId="435" locator="284:3-291:3">
               <expression localId="434" locator="284:10-291:3" xsi:type="Tuple">
                  <element name="rxNormCode">
                     <value localId="423" locator="285:16-285:29" path="code" scope="OpioidMed" xsi:type="Property"/>
                  </element>
                  <element name="authortime">
                     <value localId="425" locator="286:16-286:39" path="authorDatetime" scope="OpioidMed" xsi:type="Property"/>
                  </element>
                  <element name="effectivePeriod">
                     <value localId="426" locator="287:21-287:29" name="medPeriod" xsi:type="QueryLetRef"/>
                  </element>
                  <element name="conversionFactor">
                     <value localId="428" locator="288:22-288:41" path="conversionFactor" xsi:type="Property">
                        <source localId="427" locator="288:22-288:24" name="MME" xsi:type="QueryLetRef"/>
                     </value>
                  </element>
                  <element name="daysInPeriod">
                     <value localId="431" locator="289:18-289:49" name="DaysInPeriod" libraryName="Timing" xsi:type="FunctionRef">
                        <operand localId="430" locator="289:40-289:48" name="medPeriod" xsi:type="QueryLetRef"/>
                     </value>
                  </element>
                  <element name="mme">
                     <value localId="433" locator="290:9-290:15" path="MME" xsi:type="Property">
                        <source localId="432" locator="290:9-290:11" name="MME" xsi:type="QueryLetRef"/>
                     </value>
                  </element>
               </expression>
            </return>
         </expression>
         <operand name="medications">
            <operandTypeSpecifier localId="288" locator="271:62-271:86" xsi:type="ListTypeSpecifier">
               <elementType localId="287" locator="271:67-271:85" name="qdm53:PositiveMedicationOrder" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
         <operand name="period">
            <operandTypeSpecifier localId="290" locator="271:96-271:113" xsi:type="IntervalTypeSpecifier">
               <pointType localId="289" locator="271:105-271:112" name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="490" locator="249:1-269:3" name="CalculatesTotalMMESumDays" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="490">
               <a:s>define function &quot;CalculatesTotalMMESumDays&quot;(scriptsMMEDays </a:s>
               <a:s r="463">
                  <a:s>List&lt;</a:s>
                  <a:s r="462">
                     <a:s>Tuple {&#xd;
	</a:s>
                     <a:s r="449">
                        <a:s>rxNormCode </a:s>
                        <a:s r="448">
                           <a:s>Code</a:s>
                        </a:s>
                     </a:s>
                     <a:s>,&#xd;
	</a:s>
                     <a:s r="451">
                        <a:s>authortime </a:s>
                        <a:s r="450">
                           <a:s>DateTime</a:s>
                        </a:s>
                     </a:s>
                     <a:s>,&#xd;
	</a:s>
                     <a:s r="454">
                        <a:s>effectivePeriod </a:s>
                        <a:s r="453">
                           <a:s>Interval&lt;</a:s>
                           <a:s r="452">
                              <a:s>DateTime</a:s>
                           </a:s>
                           <a:s>></a:s>
                        </a:s>
                     </a:s>
                     <a:s>,&#xd;
	</a:s>
                     <a:s r="456">
                        <a:s>conversionFactor </a:s>
                        <a:s r="455">
                           <a:s>Decimal</a:s>
                        </a:s>
                     </a:s>
                     <a:s>,&#xd;
	</a:s>
                     <a:s r="459">
                        <a:s>daysInPeriod </a:s>
                        <a:s r="458">
                           <a:s>List&lt;</a:s>
                           <a:s r="457">
                              <a:s>DateTime</a:s>
                           </a:s>
                           <a:s>></a:s>
                        </a:s>
                     </a:s>
                     <a:s>,&#xd;
	</a:s>
                     <a:s r="461">
                        <a:s>mme </a:s>
                        <a:s r="460">
                           <a:s>Quantity</a:s>
                        </a:s>
                     </a:s>
                     <a:s>&#xd;
}</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s>):&#xd;
	/*Calculates the total MME for each day across multiple opioid prescriptions*/&#xd;
	</a:s>
               <a:s r="489">
                  <a:s r="489">
                     <a:s>
                        <a:s r="472">
                           <a:s r="471">
                              <a:s>( </a:s>
                              <a:s r="471">
                                 <a:s>distinct</a:s>
                                 <a:s r="470">
                                    <a:s>(</a:s>
                                    <a:s r="470">
                                       <a:s>flatten</a:s>
                                       <a:s r="469">
                                          <a:s>(</a:s>
                                          <a:s r="469">
                                             <a:s>
                                                <a:s r="465">
                                                   <a:s r="464">
                                                      <a:s>
                                                         <a:s>scriptsMMEDays</a:s>
                                                      </a:s>
                                                   </a:s>
                                                   <a:s> MMEDays</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>&#xd;
				</a:s>
                                             <a:s r="468">
                                                <a:s>return all </a:s>
                                                <a:s r="467">
                                                   <a:s r="466">
                                                      <a:s>MMEDays</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="467">
                                                      <a:s>daysInPeriod</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>&#xd;
		)</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>&#xd;
	)</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s> Day</a:s>
                        </a:s>
                     </a:s>
                     <a:s>&#xd;
		</a:s>
                     <a:s>
                        <a:s>let </a:s>
                        <a:s r="484">
                           <a:s>totalMME: </a:s>
                           <a:s r="483">
                              <a:s>Sum(</a:s>
                              <a:s r="482">
                                 <a:s>
                                    <a:s r="474">
                                       <a:s r="473">
                                          <a:s>
                                             <a:s>scriptsMMEDays</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> ScriptMMEDays</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>&#xd;
				</a:s>
                                 <a:s r="478">
                                    <a:s>where </a:s>
                                    <a:s r="478">
                                       <a:s r="475">
                                          <a:s>Day</a:s>
                                       </a:s>
                                       <a:s> in </a:s>
                                       <a:s r="477">
                                          <a:s r="476">
                                             <a:s>ScriptMMEDays</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="477">
                                             <a:s>daysInPeriod</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>&#xd;
				</a:s>
                                 <a:s r="481">
                                    <a:s>return all </a:s>
                                    <a:s r="480">
                                       <a:s r="479">
                                          <a:s>ScriptMMEDays</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="480">
                                          <a:s>mme</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>&#xd;
		)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>&#xd;
		</a:s>
                     <a:s r="488">
                        <a:s>return </a:s>
                        <a:s r="487">
                           <a:s>{&#xd;
			</a:s>
                           <a:s>
                              <a:s>Day: </a:s>
                              <a:s r="485">
                                 <a:s>Day</a:s>
                              </a:s>
                           </a:s>
                           <a:s>,&#xd;
			</a:s>
                           <a:s>
                              <a:s>totalMME: </a:s>
                              <a:s r="486">
                                 <a:s>totalMME</a:s>
                              </a:s>
                           </a:s>
                           <a:s>&#xd;
		}</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="489" locator="258:2-269:3" xsi:type="Query">
            <source localId="472" locator="258:2-261:7" alias="Day">
               <expression localId="471" locator="258:2-261:3" xsi:type="Distinct">
                  <operand localId="470" locator="258:12-261:2" xsi:type="Flatten">
                     <operand localId="469" locator="258:20-260:3" xsi:type="Query">
                        <source localId="465" locator="258:21-258:42" alias="MMEDays">
                           <expression localId="464" locator="258:21-258:34" name="scriptsMMEDays" xsi:type="OperandRef"/>
                        </source>
                        <return localId="468" locator="259:5-259:35" distinct="false">
                           <expression localId="467" locator="259:16-259:35" path="daysInPeriod" scope="MMEDays" xsi:type="Property"/>
                        </return>
                     </operand>
                  </operand>
               </expression>
            </source>
            <let localId="484" locator="262:7-265:3" identifier="totalMME">
               <expression localId="483" locator="262:17-265:3" xsi:type="Sum">
                  <source localId="482" locator="262:21-264:32" xsi:type="Query">
                     <source localId="474" locator="262:21-262:48" alias="ScriptMMEDays">
                        <expression localId="473" locator="262:21-262:34" name="scriptsMMEDays" xsi:type="OperandRef"/>
                     </source>
                     <where localId="478" locator="263:5-263:43" xsi:type="In">
                        <operand localId="475" locator="263:11-263:13" name="Day" xsi:type="AliasRef"/>
                        <operand localId="477" locator="263:18-263:43" path="daysInPeriod" scope="ScriptMMEDays" xsi:type="Property"/>
                     </where>
                     <return localId="481" locator="264:5-264:32" distinct="false">
                        <expression localId="480" locator="264:16-264:32" path="mme" scope="ScriptMMEDays" xsi:type="Property"/>
                     </return>
                  </source>
               </expression>
            </let>
            <return localId="488" locator="266:3-269:3">
               <expression localId="487" locator="266:10-269:3" xsi:type="Tuple">
                  <element name="Day">
                     <value localId="485" locator="267:9-267:11" name="Day" xsi:type="AliasRef"/>
                  </element>
                  <element name="totalMME">
                     <value localId="486" locator="268:14-268:21" name="totalMME" xsi:type="QueryLetRef"/>
                  </element>
               </expression>
            </return>
         </expression>
         <operand name="scriptsMMEDays">
            <operandTypeSpecifier localId="463" locator="249:60-256:2" xsi:type="ListTypeSpecifier">
               <elementType localId="462" locator="249:65-256:1" xsi:type="TupleTypeSpecifier">
                  <element localId="449" locator="250:2-250:16" name="rxNormCode">
                     <elementType localId="448" locator="250:13-250:16" name="t:Code" xsi:type="NamedTypeSpecifier"/>
                  </element>
                  <element localId="451" locator="251:2-251:20" name="authortime">
                     <elementType localId="450" locator="251:13-251:20" name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                  </element>
                  <element localId="454" locator="252:2-252:35" name="effectivePeriod">
                     <elementType localId="453" locator="252:18-252:35" xsi:type="IntervalTypeSpecifier">
                        <pointType localId="452" locator="252:27-252:34" name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                     </elementType>
                  </element>
                  <element localId="456" locator="253:2-253:25" name="conversionFactor">
                     <elementType localId="455" locator="253:19-253:25" name="t:Decimal" xsi:type="NamedTypeSpecifier"/>
                  </element>
                  <element localId="459" locator="254:2-254:28" name="daysInPeriod">
                     <elementType localId="458" locator="254:15-254:28" xsi:type="ListTypeSpecifier">
                        <elementType localId="457" locator="254:20-254:27" name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                     </elementType>
                  </element>
                  <element localId="461" locator="255:2-255:13" name="mme">
                     <elementType localId="460" locator="255:6-255:13" name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                  </element>
               </elementType>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="495" locator="116:1-126:3" name="Active Periods with MME Sum Days" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="495">
               <a:s>define &quot;Active Periods with MME Sum Days&quot;:&#xd;
	/*Calculates individual MME for each day in every prescription, and a total daily MME across prescriptions, accounting for overlap*/&#xd;
	</a:s>
               <a:s r="494">
                  <a:s>
                     <a:s r="282">
                        <a:s r="281">
                           <a:s>
                              <a:s>&quot;Active Periods with and without Gaps and Cumulative Medication Duration of 90 or More Days&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> Period</a:s>
                     </a:s>
                  </a:s>
                  <a:s>&#xd;
		</a:s>
                  <a:s>
                     <a:s>let </a:s>
                     <a:s r="439">
                        <a:s>ScriptsMMEDays: </a:s>
                        <a:s r="438">
                           <a:s>&quot;CalculateDailyMMEPerMedication&quot;(</a:s>
                           <a:s r="284">
                              <a:s r="283">
                                 <a:s>Period</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="284">
                                 <a:s>meds</a:s>
                              </a:s>
                           </a:s>
                           <a:s>, </a:s>
                           <a:s r="286">
                              <a:s r="285">
                                 <a:s>Period</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="286">
                                 <a:s>period</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>&#xd;
		</a:s>
                  <a:s r="493">
                     <a:s>return </a:s>
                     <a:s r="492">
                        <a:s>{&#xd;
			</a:s>
                        <a:s>
                           <a:s>period: </a:s>
                           <a:s r="441">
                              <a:s r="440">
                                 <a:s>Period</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="441">
                                 <a:s>period</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,&#xd;
			</a:s>
                        <a:s>
                           <a:s>meds: </a:s>
                           <a:s r="443">
                              <a:s r="442">
                                 <a:s>Period</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="443">
                                 <a:s>meds</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,&#xd;
			</a:s>
                        <a:s>
                           <a:s>cmd: </a:s>
                           <a:s r="445">
                              <a:s r="444">
                                 <a:s>Period</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="445">
                                 <a:s>cmd</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,&#xd;
			</a:s>
                        <a:s>
                           <a:s>mmeDays: </a:s>
                           <a:s r="446">
                              <a:s>ScriptsMMEDays</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,&#xd;
			</a:s>
                        <a:s>
                           <a:s>mmeSumDays: </a:s>
                           <a:s r="491">
                              <a:s>&quot;CalculatesTotalMMESumDays&quot;(</a:s>
                              <a:s r="447">
                                 <a:s>ScriptsMMEDays</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>&#xd;
		}</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="494" locator="118:2-126:3" xsi:type="Query">
            <source localId="282" locator="118:2-118:100" alias="Period">
               <expression localId="281" locator="118:2-118:93" name="Active Periods with and without Gaps and Cumulative Medication Duration of 90 or More Days" xsi:type="ExpressionRef"/>
            </source>
            <let localId="439" locator="119:7-119:82" identifier="ScriptsMMEDays">
               <expression localId="438" locator="119:23-119:82" name="CalculateDailyMMEPerMedication" xsi:type="FunctionRef">
                  <operand localId="284" locator="119:56-119:66" path="meds" scope="Period" xsi:type="Property"/>
                  <operand localId="286" locator="119:69-119:81" path="period" scope="Period" xsi:type="Property"/>
               </expression>
            </let>
            <return localId="493" locator="120:3-126:3">
               <expression localId="492" locator="120:10-126:3" xsi:type="Tuple">
                  <element name="period">
                     <value localId="441" locator="121:12-121:24" path="period" scope="Period" xsi:type="Property"/>
                  </element>
                  <element name="meds">
                     <value localId="443" locator="122:10-122:20" path="meds" scope="Period" xsi:type="Property"/>
                  </element>
                  <element name="cmd">
                     <value localId="445" locator="123:9-123:18" path="cmd" scope="Period" xsi:type="Property"/>
                  </element>
                  <element name="mmeDays">
                     <value localId="446" locator="124:13-124:26" name="ScriptsMMEDays" xsi:type="QueryLetRef"/>
                  </element>
                  <element name="mmeSumDays">
                     <value localId="491" locator="125:16-125:58" name="CalculatesTotalMMESumDays" xsi:type="FunctionRef">
                        <operand localId="447" locator="125:44-125:57" name="ScriptsMMEDays" xsi:type="QueryLetRef"/>
                     </value>
                  </element>
               </expression>
            </return>
         </expression>
      </def>
      <def localId="510" locator="75:1-80:8" name="Active Periods with MMEs 90 or More for 90 or More Days" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="510">
               <a:s>define &quot;Active Periods with MMEs 90 or More for 90 or More Days&quot;:&#xd;
	/*Periods with MMEs that are 90 milligrams or more for 90 days or more*/&#xd;
	</a:s>
               <a:s r="509">
                  <a:s>
                     <a:s r="497">
                        <a:s r="496">
                           <a:s>
                              <a:s>&quot;Active Periods with MME Sum Days&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> Period</a:s>
                     </a:s>
                  </a:s>
                  <a:s>&#xd;
		</a:s>
                  <a:s r="508">
                     <a:s>where </a:s>
                     <a:s r="508">
                        <a:s r="506">
                           <a:s>Count(</a:s>
                           <a:s r="505">
                              <a:s>
                                 <a:s r="499">
                                    <a:s r="498">
                                       <a:s>
                                          <a:s>Period.mmeSumDays</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> MMESum</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>&#xd;
				</a:s>
                              <a:s r="504">
                                 <a:s>where </a:s>
                                 <a:s r="504">
                                    <a:s r="502">
                                       <a:s r="501">
                                          <a:s r="500">
                                             <a:s>MMESum</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="501">
                                             <a:s>totalMME</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="502">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s r="503"> >= 90</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>&#xd;
		)</a:s>
                        </a:s>
                        <a:s r="507">>= 90</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="509" locator="77:2-80:8" xsi:type="Query">
            <source localId="497" locator="77:2-77:42" alias="Period">
               <expression localId="496" locator="77:2-77:35" name="Active Periods with MME Sum Days" xsi:type="ExpressionRef"/>
            </source>
            <where localId="508" locator="78:3-80:8" xsi:type="GreaterOrEqual">
               <operand localId="506" locator="78:9-80:3" xsi:type="Count">
                  <source localId="505" locator="78:15-79:37" xsi:type="Query">
                     <source localId="499" locator="78:15-78:38" alias="MMESum">
                        <expression localId="498" locator="78:15-78:31" path="mmeSumDays" scope="Period" xsi:type="Property"/>
                     </source>
                     <where localId="504" locator="79:5-79:37" xsi:type="GreaterOrEqual">
                        <operand localId="502" locator="79:11-79:31" path="value" xsi:type="Property">
                           <source localId="501" locator="79:11-79:25" path="totalMME" scope="MMESum" xsi:type="Property"/>
                        </operand>
                        <operand xsi:type="ToDecimal">
                           <operand localId="503" locator="79:36-79:37" valueType="t:Integer" value="90" xsi:type="Literal"/>
                        </operand>
                     </where>
                  </source>
               </operand>
               <operand localId="507" locator="80:7-80:8" valueType="t:Integer" value="90" xsi:type="Literal"/>
            </where>
         </expression>
      </def>
      <def localId="513" locator="112:1-114:65" name="Numerator" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="513">
               <a:s>define &quot;Numerator&quot;:&#xd;
	/*Patients with opioid prescription orders of 90 or more MME*/&#xd;
	</a:s>
               <a:s r="512">
                  <a:s>exists </a:s>
                  <a:s r="511">
                     <a:s>&quot;Active Periods with MMEs 90 or More for 90 or More Days&quot;</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="512" locator="114:2-114:65" xsi:type="Exists">
            <operand localId="511" locator="114:9-114:65" name="Active Periods with MMEs 90 or More for 90 or More Days" xsi:type="ExpressionRef"/>
         </expression>
      </def>
      <def localId="586" locator="190:1-214:3" name="Denominator Exclusion" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="586">
               <a:s>define &quot;Denominator Exclusion&quot;:&#xd;
	/*Measure excludes patients receiving palliative or hospice treatment during the measurement period. Or patients who have a diagnosis of cancer (could occur up to 1 yr prior) or sickle cell disease during the measurement period*/&#xd;
	</a:s>
               <a:s r="585">
                  <a:s r="573">
                     <a:s r="554">
                        <a:s r="538">
                           <a:s r="525">
                              <a:s>exists </a:s>
                              <a:s r="524">
                                 <a:s>( </a:s>
                                 <a:s r="524">
                                    <a:s>
                                       <a:s r="515">
                                          <a:s r="514">
                                             <a:s>
                                                <a:s>&quot;Encounters during Measurement Period&quot;</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> QualifyingEncounter</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>&#xd;
			</a:s>
                                    <a:s r="523">
                                       <a:s>with </a:s>
                                       <a:s r="517">
                                          <a:s r="516">
                                             <a:s r="516">
                                                <a:s>[&quot;Intervention, Order&quot;: </a:s>
                                                <a:s>
                                                   <a:s>&quot;Palliative Care&quot;</a:s>
                                                </a:s>
                                                <a:s>]</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> PalliativeCareOrder</a:s>
                                       </a:s>
                                       <a:s>&#xd;
				such that </a:s>
                                       <a:s r="522">
                                          <a:s r="519">
                                             <a:s r="518">
                                                <a:s>PalliativeCareOrder</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="519">
                                                <a:s>authorDatetime</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s r="522"> during </a:s>
                                          <a:s r="521">
                                             <a:s r="520">
                                                <a:s>QualifyingEncounter</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="521">
                                                <a:s>relevantPeriod</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>&#xd;
	)</a:s>
                              </a:s>
                           </a:s>
                           <a:s>&#xd;
		or </a:s>
                           <a:s r="537">
                              <a:s>exists </a:s>
                              <a:s r="536">
                                 <a:s>( </a:s>
                                 <a:s r="536">
                                    <a:s>
                                       <a:s r="527">
                                          <a:s r="526">
                                             <a:s>
                                                <a:s>&quot;Encounters during Measurement Period&quot;</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> QualifyingEncounter</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>&#xd;
				</a:s>
                                    <a:s r="535">
                                       <a:s>with </a:s>
                                       <a:s r="529">
                                          <a:s r="528">
                                             <a:s r="528">
                                                <a:s>[&quot;Intervention, Performed&quot;: </a:s>
                                                <a:s>
                                                   <a:s>&quot;Palliative Care&quot;</a:s>
                                                </a:s>
                                                <a:s>]</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> PalliativeCareIntervention</a:s>
                                       </a:s>
                                       <a:s>&#xd;
					such that </a:s>
                                       <a:s r="534">
                                          <a:s r="531">
                                             <a:s r="530">
                                                <a:s>PalliativeCareIntervention</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="531">
                                                <a:s>relevantPeriod</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s r="534"> overlaps </a:s>
                                          <a:s r="533">
                                             <a:s r="532">
                                                <a:s>QualifyingEncounter</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="533">
                                                <a:s>relevantPeriod</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>&#xd;
		)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>&#xd;
		or </a:s>
                        <a:s r="553">
                           <a:s>exists </a:s>
                           <a:s r="552">
                              <a:s>( </a:s>
                              <a:s r="552">
                                 <a:s>
                                    <a:s r="540">
                                       <a:s r="539">
                                          <a:s>
                                             <a:s>&quot;Encounters during Measurement Period&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> QualifyingEncounter</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>&#xd;
				</a:s>
                                 <a:s r="551">
                                    <a:s>with </a:s>
                                    <a:s r="546">
                                       <a:s r="545">
                                          <a:s>( </a:s>
                                          <a:s r="545">
                                             <a:s r="543">
                                                <a:s r="541">
                                                   <a:s>[&quot;Intervention, Order&quot;: </a:s>
                                                   <a:s>
                                                      <a:s>&quot;Hospice Care SNO&quot;</a:s>
                                                   </a:s>
                                                   <a:s>]</a:s>
                                                </a:s>
                                                <a:s>&#xd;
					union </a:s>
                                                <a:s r="542">
                                                   <a:s>[&quot;Intervention, Performed&quot;: </a:s>
                                                   <a:s>
                                                      <a:s>&quot;Hospice Care SNO&quot;</a:s>
                                                   </a:s>
                                                   <a:s>]</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>&#xd;
					union </a:s>
                                             <a:s r="544">
                                                <a:s>[&quot;Intervention, Recommended&quot;: </a:s>
                                                <a:s>
                                                   <a:s>&quot;Hospice Care SNO&quot;</a:s>
                                                </a:s>
                                                <a:s>]</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> )</a:s>
                                       </a:s>
                                       <a:s> Hospice</a:s>
                                    </a:s>
                                    <a:s>&#xd;
					such that </a:s>
                                    <a:s r="550">
                                       <a:s r="548">
                                          <a:s r="547">
                                             <a:s>Hospice</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="548">
                                             <a:s>authorDatetime</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s r="550"> during </a:s>
                                       <a:s r="549">
                                          <a:s>&quot;Measurement Period&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>&#xd;
		)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>&#xd;
		or </a:s>
                     <a:s r="572">
                        <a:s>exists </a:s>
                        <a:s r="571">
                           <a:s>( </a:s>
                           <a:s r="571">
                              <a:s>
                                 <a:s r="556">
                                    <a:s r="555">
                                       <a:s>
                                          <a:s>&quot;Encounters during Measurement Period&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> QualifyingEncounter</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>&#xd;
				</a:s>
                              <a:s r="570">
                                 <a:s>with </a:s>
                                 <a:s r="558">
                                    <a:s r="557">
                                       <a:s r="557">
                                          <a:s>[&quot;Diagnosis&quot;: </a:s>
                                          <a:s>
                                             <a:s>&quot;All Cancer&quot;</a:s>
                                          </a:s>
                                          <a:s>]</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> Cancer</a:s>
                                 </a:s>
                                 <a:s>&#xd;
					such that </a:s>
                                 <a:s r="569">
                                    <a:s r="564">
                                       <a:s r="560">
                                          <a:s r="559">
                                             <a:s>Cancer</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="560">
                                             <a:s>prevalencePeriod</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> </a:s>
                                       <a:s r="564">
                                          <a:s>starts </a:s>
                                          <a:s r="563">
                                             <a:s>1 year</a:s>
                                          </a:s>
                                          <a:s> or less before</a:s>
                                       </a:s>
                                       <a:s> </a:s>
                                       <a:s r="562">
                                          <a:s>start of </a:s>
                                          <a:s r="561">
                                             <a:s>&quot;Measurement Period&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>&#xd;
						or </a:s>
                                    <a:s r="568">
                                       <a:s r="566">
                                          <a:s r="565">
                                             <a:s>Cancer</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="566">
                                             <a:s>prevalencePeriod</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s r="568"> starts during </a:s>
                                       <a:s r="567">
                                          <a:s>&quot;Measurement Period&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>&#xd;
		)</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>&#xd;
		or </a:s>
                  <a:s r="584">
                     <a:s>exists </a:s>
                     <a:s r="583">
                        <a:s>( </a:s>
                        <a:s r="583">
                           <a:s>
                              <a:s r="575">
                                 <a:s r="574">
                                    <a:s>
                                       <a:s>&quot;Encounters during Measurement Period&quot;</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> QualifyingEncounter</a:s>
                              </a:s>
                           </a:s>
                           <a:s>&#xd;
				</a:s>
                           <a:s r="582">
                              <a:s>with </a:s>
                              <a:s r="577">
                                 <a:s r="576">
                                    <a:s r="576">
                                       <a:s>[&quot;Diagnosis&quot;: </a:s>
                                       <a:s>
                                          <a:s>&quot;Sickle Cell Disease SNOMEDCT&quot;</a:s>
                                       </a:s>
                                       <a:s>]</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> SickleCell</a:s>
                              </a:s>
                              <a:s>&#xd;
					such that </a:s>
                              <a:s r="581">
                                 <a:s r="579">
                                    <a:s r="578">
                                       <a:s>SickleCell</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="579">
                                       <a:s>prevalencePeriod</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s r="581"> overlaps </a:s>
                                 <a:s r="580">
                                    <a:s>&quot;Measurement Period&quot;</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>&#xd;
		)</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="585" locator="192:2-214:3" xsi:type="Or">
            <operand localId="573" locator="192:2-210:3" xsi:type="Or">
               <operand localId="554" locator="192:2-205:3" xsi:type="Or">
                  <operand localId="538" locator="192:2-199:3" xsi:type="Or">
                     <operand localId="525" locator="192:2-195:2" xsi:type="Exists">
                        <operand localId="524" locator="192:9-195:2" xsi:type="Query">
                           <source localId="515" locator="192:11-192:68" alias="QualifyingEncounter">
                              <expression localId="514" locator="192:11-192:48" name="Encounters during Measurement Period" xsi:type="ExpressionRef"/>
                           </source>
                           <relationship localId="523" locator="193:4-194:90" alias="PalliativeCareOrder" xsi:type="With">
                              <expression localId="516" locator="193:9-193:50" dataType="qdm53:PositiveInterventionOrder" templateId="PositiveInterventionOrder" codeProperty="code" xsi:type="Retrieve">
                                 <codes name="Palliative Care" xsi:type="ValueSetRef"/>
                              </expression>
                              <suchThat localId="522" locator="194:15-194:90" xsi:type="In">
                                 <operand localId="519" locator="194:15-194:48" path="authorDatetime" scope="PalliativeCareOrder" xsi:type="Property"/>
                                 <operand localId="521" locator="194:57-194:90" path="relevantPeriod" scope="QualifyingEncounter" xsi:type="Property"/>
                              </suchThat>
                           </relationship>
                        </operand>
                     </operand>
                     <operand localId="537" locator="196:6-199:3" xsi:type="Exists">
                        <operand localId="536" locator="196:13-199:3" xsi:type="Query">
                           <source localId="527" locator="196:15-196:72" alias="QualifyingEncounter">
                              <expression localId="526" locator="196:15-196:52" name="Encounters during Measurement Period" xsi:type="ExpressionRef"/>
                           </source>
                           <relationship localId="535" locator="197:5-198:100" alias="PalliativeCareIntervention" xsi:type="With">
                              <expression localId="528" locator="197:10-197:55" dataType="qdm53:PositiveInterventionPerformed" templateId="PositiveInterventionPerformed" codeProperty="code" xsi:type="Retrieve">
                                 <codes name="Palliative Care" xsi:type="ValueSetRef"/>
                              </expression>
                              <suchThat localId="534" locator="198:16-198:100" xsi:type="Overlaps">
                                 <operand localId="531" locator="198:16-198:56" path="relevantPeriod" scope="PalliativeCareIntervention" xsi:type="Property"/>
                                 <operand localId="533" locator="198:67-198:100" path="relevantPeriod" scope="QualifyingEncounter" xsi:type="Property"/>
                              </suchThat>
                           </relationship>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="553" locator="200:6-205:3" xsi:type="Exists">
                     <operand localId="552" locator="200:13-205:3" xsi:type="Query">
                        <source localId="540" locator="200:15-200:72" alias="QualifyingEncounter">
                           <expression localId="539" locator="200:15-200:52" name="Encounters during Measurement Period" xsi:type="ExpressionRef"/>
                        </source>
                        <relationship localId="551" locator="201:5-204:65" alias="Hospice" xsi:type="With">
                           <expression localId="545" locator="201:10-203:62" xsi:type="Union">
                              <operand xsi:type="As">
                                 <operand localId="543" locator="201:12-202:58" xsi:type="Union">
                                    <operand xsi:type="As">
                                       <operand localId="541" locator="201:12-201:54" dataType="qdm53:PositiveInterventionOrder" templateId="PositiveInterventionOrder" codeProperty="code" xsi:type="Retrieve">
                                          <codes name="Hospice Care SNO" xsi:type="ValueSetRef"/>
                                       </operand>
                                       <asTypeSpecifier xsi:type="ListTypeSpecifier">
                                          <elementType xsi:type="ChoiceTypeSpecifier">
                                             <choice name="qdm53:PositiveInterventionPerformed" xsi:type="NamedTypeSpecifier"/>
                                             <choice name="qdm53:PositiveInterventionOrder" xsi:type="NamedTypeSpecifier"/>
                                          </elementType>
                                       </asTypeSpecifier>
                                    </operand>
                                    <operand xsi:type="As">
                                       <operand localId="542" locator="202:12-202:58" dataType="qdm53:PositiveInterventionPerformed" templateId="PositiveInterventionPerformed" codeProperty="code" xsi:type="Retrieve">
                                          <codes name="Hospice Care SNO" xsi:type="ValueSetRef"/>
                                       </operand>
                                       <asTypeSpecifier xsi:type="ListTypeSpecifier">
                                          <elementType xsi:type="ChoiceTypeSpecifier">
                                             <choice name="qdm53:PositiveInterventionPerformed" xsi:type="NamedTypeSpecifier"/>
                                             <choice name="qdm53:PositiveInterventionOrder" xsi:type="NamedTypeSpecifier"/>
                                          </elementType>
                                       </asTypeSpecifier>
                                    </operand>
                                 </operand>
                                 <asTypeSpecifier xsi:type="ListTypeSpecifier">
                                    <elementType xsi:type="ChoiceTypeSpecifier">
                                       <choice name="qdm53:PositiveInterventionPerformed" xsi:type="NamedTypeSpecifier"/>
                                       <choice name="qdm53:PositiveInterventionOrder" xsi:type="NamedTypeSpecifier"/>
                                       <choice name="qdm53:PositiveInterventionRecommended" xsi:type="NamedTypeSpecifier"/>
                                    </elementType>
                                 </asTypeSpecifier>
                              </operand>
                              <operand xsi:type="As">
                                 <operand localId="544" locator="203:12-203:60" dataType="qdm53:PositiveInterventionRecommended" templateId="PositiveInterventionRecommended" codeProperty="code" xsi:type="Retrieve">
                                    <codes name="Hospice Care SNO" xsi:type="ValueSetRef"/>
                                 </operand>
                                 <asTypeSpecifier xsi:type="ListTypeSpecifier">
                                    <elementType xsi:type="ChoiceTypeSpecifier">
                                       <choice name="qdm53:PositiveInterventionPerformed" xsi:type="NamedTypeSpecifier"/>
                                       <choice name="qdm53:PositiveInterventionOrder" xsi:type="NamedTypeSpecifier"/>
                                       <choice name="qdm53:PositiveInterventionRecommended" xsi:type="NamedTypeSpecifier"/>
                                    </elementType>
                                 </asTypeSpecifier>
                              </operand>
                           </expression>
                           <suchThat localId="550" locator="204:16-204:65" xsi:type="In">
                              <operand localId="548" locator="204:16-204:37" path="authorDatetime" scope="Hospice" xsi:type="Property"/>
                              <operand localId="549" locator="204:46-204:65" name="Measurement Period" xsi:type="ParameterRef"/>
                           </suchThat>
                        </relationship>
                     </operand>
                  </operand>
               </operand>
               <operand localId="572" locator="206:6-210:3" xsi:type="Exists">
                  <operand localId="571" locator="206:13-210:3" xsi:type="Query">
                     <source localId="556" locator="206:15-206:72" alias="QualifyingEncounter">
                        <expression localId="555" locator="206:15-206:52" name="Encounters during Measurement Period" xsi:type="ExpressionRef"/>
                     </source>
                     <relationship localId="570" locator="207:5-209:67" alias="Cancer" xsi:type="With">
                        <expression localId="557" locator="207:10-207:36" dataType="qdm53:Diagnosis" codeProperty="code" xsi:type="Retrieve">
                           <codes name="All Cancer" xsi:type="ValueSetRef"/>
                        </expression>
                        <suchThat localId="569" locator="208:16-209:67" xsi:type="Or">
                           <operand localId="564" locator="208:16-208:97" xsi:type="In">
                              <operand locator="208:40-208:45" xsi:type="Start">
                                 <operand localId="560" locator="208:16-208:38" path="prevalencePeriod" scope="Cancer" xsi:type="Property"/>
                              </operand>
                              <operand locator="208:47-208:60" lowClosed="true" highClosed="false" xsi:type="Interval">
                                 <low locator="208:69-208:97" xsi:type="Subtract">
                                    <operand localId="562" locator="208:69-208:97" xsi:type="Start">
                                       <operand localId="561" locator="208:78-208:97" name="Measurement Period" xsi:type="ParameterRef"/>
                                    </operand>
                                    <operand localId="563" locator="208:47-208:52" value="1" unit="year" xsi:type="Quantity"/>
                                 </low>
                                 <high localId="562" locator="208:69-208:97" xsi:type="Start">
                                    <operand localId="561" locator="208:78-208:97" name="Measurement Period" xsi:type="ParameterRef"/>
                                 </high>
                              </operand>
                           </operand>
                           <operand localId="568" locator="209:10-209:67" xsi:type="In">
                              <operand locator="209:34-209:39" xsi:type="Start">
                                 <operand localId="566" locator="209:10-209:32" path="prevalencePeriod" scope="Cancer" xsi:type="Property"/>
                              </operand>
                              <operand localId="567" locator="209:48-209:67" name="Measurement Period" xsi:type="ParameterRef"/>
                           </operand>
                        </suchThat>
                     </relationship>
                  </operand>
               </operand>
            </operand>
            <operand localId="584" locator="211:6-214:3" xsi:type="Exists">
               <operand localId="583" locator="211:13-214:3" xsi:type="Query">
                  <source localId="575" locator="211:15-211:72" alias="QualifyingEncounter">
                     <expression localId="574" locator="211:15-211:52" name="Encounters during Measurement Period" xsi:type="ExpressionRef"/>
                  </source>
                  <relationship localId="582" locator="212:5-213:72" alias="SickleCell" xsi:type="With">
                     <expression localId="576" locator="212:10-212:54" dataType="qdm53:Diagnosis" codeProperty="code" xsi:type="Retrieve">
                        <codes name="Sickle Cell Disease SNOMEDCT" xsi:type="ValueSetRef"/>
                     </expression>
                     <suchThat localId="581" locator="213:16-213:72" xsi:type="Overlaps">
                        <operand localId="579" locator="213:16-213:42" path="prevalencePeriod" scope="SickleCell" xsi:type="Property"/>
                        <operand localId="580" locator="213:53-213:72" name="Measurement Period" xsi:type="ParameterRef"/>
                     </suchThat>
                  </relationship>
               </operand>
            </operand>
         </expression>
      </def>
   </statements>
</library>


